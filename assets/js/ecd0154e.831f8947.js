"use strict";(self.webpackChunkmd=self.webpackChunkmd||[]).push([[1654],{4137:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return u}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,l=e.originalType,s=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),d=c(n),u=i,h=d["".concat(s,".").concat(u)]||d[u]||m[u]||l;return n?a.createElement(h,o(o({ref:t},p),{},{components:n})):a.createElement(h,o({ref:t},p))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=n.length,o=new Array(l);o[0]=d;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r.mdxType="string"==typeof e?e:i,o[1]=r;for(var c=2;c<l;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1872:function(e,t,n){n.d(t,{m:function(){return l}});var a=n(7294),i="leadText_qzwo",l=function(e){var t=e.content;return a.createElement(a.Fragment,null,a.createElement("p",{id:i},t))}},8223:function(e,t,n){n.r(t),n.d(t,{assets:function(){return m},contentTitle:function(){return c},default:function(){return h},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return d}});var a=n(7462),i=n(3366),l=(n(7294),n(4137)),o=n(1872),r=["components"],s={id:"js-dom",title:"JS Document Object Model",sidebar_label:"DOM",description:"Explore, traverse and modify web pages with the power of JavaScript DOM properties and methods.",image:"img/og/og-image-js-dom.png",tags:["JavaScript","Cloud Page","Personalisation"]},c=void 0,p={unversionedId:"js/js-dom",id:"js/js-dom",title:"JS Document Object Model",description:"Explore, traverse and modify web pages with the power of JavaScript DOM properties and methods.",source:"@site/docs/js/js-dom.mdx",sourceDirName:"js",slug:"/js/js-dom",permalink:"/docs/js/js-dom",editUrl:"https://github.com/MateuszDabrowski/mateuszdabrowski.pl/edit/master/docs/js/js-dom.mdx",tags:[{label:"JavaScript",permalink:"/docs/tags/java-script"},{label:"Cloud Page",permalink:"/docs/tags/cloud-page"},{label:"Personalisation",permalink:"/docs/tags/personalisation"}],version:"current",lastUpdatedBy:"Mateusz D\u0105browski",lastUpdatedAt:1648292590,formattedLastUpdatedAt:"3/26/2022",frontMatter:{id:"js-dom",title:"JS Document Object Model",sidebar_label:"DOM",description:"Explore, traverse and modify web pages with the power of JavaScript DOM properties and methods.",image:"img/og/og-image-js-dom.png",tags:["JavaScript","Cloud Page","Personalisation"]},sidebar:"snippets",previous:{title:"Loops",permalink:"/docs/js/js-loops"},next:{title:"Style Guide",permalink:"/docs/ampscript/ampscript-style-guide"}},m={},d=[{value:"What is Document Object Model?",id:"what-is-document-object-model",level:2},{value:"Accessing the DOM",id:"accessing-the-dom",level:2},{value:"Should you use getElement or querySelector?",id:"should-you-use-getelement-or-queryselector",level:3},{value:"Exploring the DOM",id:"exploring-the-dom",level:2},{value:"attributes",id:"attributes",level:3},{value:"classList and className",id:"classlist-and-classname",level:3},{value:"id and tagName",id:"id-and-tagname",level:3},{value:"innerText and innerHTML",id:"innertext-and-innerhtml",level:3},{value:"hidden and style",id:"hidden-and-style",level:3},{value:"Traversing the DOM",id:"traversing-the-dom",level:2},{value:"parentElement",id:"parentelement",level:3},{value:"previousElementSibling and nextElementSibling",id:"previouselementsibling-and-nextelementsibling",level:3},{value:"All things children",id:"all-things-children",level:3},{value:"The power of DOM traversing",id:"the-power-of-dom-traversing",level:3},{value:"Manipulating the DOM",id:"manipulating-the-dom",level:2},{value:"addEventListener",id:"addeventlistener",level:3},{value:"Event types",id:"event-types",level:4},{value:"click",id:"click",level:5},{value:"submit",id:"submit",level:5},{value:"focus &amp; blur",id:"focus--blur",level:5},{value:"mouseenter &amp; mouseleave",id:"mouseenter--mouseleave",level:5},{value:"Changing attributes",id:"changing-attributes",level:3},{value:"Use Cases",id:"use-cases",level:2}],u={toc:d};function h(e){var t=e.components,n=(0,i.Z)(e,r);return(0,l.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)(o.m,{content:"Explore, traverse and modify web pages with the power of JavaScript DOM properties and methods.",mdxType:"LeadText"}),(0,l.kt)("h2",{id:"what-is-document-object-model"},"What is Document Object Model?"),(0,l.kt)("p",null,"The Document Object Model (DOM) represents the structure of a web document and serves as its programming interface. In simpler words, it lets JavaScript talk with the HTML of the page. And that is huge, especially in the Marketing Automation world."),(0,l.kt)("p",null,"Why? Because it lets you manipulate your website in many ways - visible and not. Dynamic forms adapting to user actions, pages changing in real-time and enhanced data capture. All that (and so much more) is possible thanks to DOM access. So let's dive into details."),(0,l.kt)("h2",{id:"accessing-the-dom"},"Accessing the DOM"),(0,l.kt)("p",null,"To start working with Document Object Model in JavaScript, you need to use one of the special objects - ",(0,l.kt)("inlineCode",{parentName:"p"},"window")," (browser tab) or ",(0,l.kt)("inlineCode",{parentName:"p"},"document")," (page within that tab). Each of those objects offers many methods that let you interact with a webpage."),(0,l.kt)("p",null,"JavaScript lets you capture specific parts of your website and make them accessible for all your scripting needs with the help of ",(0,l.kt)("inlineCode",{parentName:"p"},"document")," object methods:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"getElementById"),": returns an element with matching id attribute (for example, elemnt with ",(0,l.kt)("inlineCode",{parentName:"li"},'id="emailAddressField"')," using ",(0,l.kt)("inlineCode",{parentName:"li"},"document.getElementById('emailAddressField')"),")"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"getElementsByTagName"),": returns a collection of matching HTML tags (for example, all ",(0,l.kt)("inlineCode",{parentName:"li"},"<p>")," tags using ",(0,l.kt)("inlineCode",{parentName:"li"},"document.getElementByTagName('p')"),")"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"getElementsByName"),": returns a collection of elements with matching name attribute (for example, all inputs with ",(0,l.kt)("inlineCode",{parentName:"li"},'name="email"')," using ",(0,l.kt)("inlineCode",{parentName:"li"},"document.getElementByName('email')"),")"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"getElementsByClassName"),": returns a collection of elements with matching class attribute (for example, all elements with ",(0,l.kt)("inlineCode",{parentName:"li"},'class="hiddenContent"')," using ",(0,l.kt)("inlineCode",{parentName:"li"},"document.getElementByClassName('hiddenContent')"),")"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"querySelector"),": returns an element with a matching CSS3 selector (for example, ",(0,l.kt)("inlineCode",{parentName:"li"},"<h2>")," element that is within ",(0,l.kt)("inlineCode",{parentName:"li"},'<p class="hiddenContent">')," using ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelector(p.hiddenContent h2')")," - notice the ",(0,l.kt)("inlineCode",{parentName:"li"},".")," prefix for a class). If there are multiple matching elements - it will return the first one."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"querySelectorAll"),": returns a collection of elements matching CSS3 selector (for example, all ",(0,l.kt)("inlineCode",{parentName:"li"},"<tr>")," elements that are within elements with ",(0,l.kt)("inlineCode",{parentName:"li"},'class=".DataCell"')," that are within an element with ",(0,l.kt)("inlineCode",{parentName:"li"},'id="attributes-repeater"')," using ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelectorAll('#attributes-repeater .DataCell tr')"),")")),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"You Should Know")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},(0,l.kt)("inlineCode",{parentName:"p"},"querySelector")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"querySelectorAll")," allow you to select elements using the power of CSS3. It means that you can go really specific with the proper syntax."),(0,l.kt)("p",{parentName:"div"},"You can select:"),(0,l.kt)("ol",{parentName:"div"},(0,l.kt)("li",{parentName:"ol"},"Tag by its name: ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelector('body')")),(0,l.kt)("li",{parentName:"ol"},"Id with ",(0,l.kt)("inlineCode",{parentName:"li"},"#")," prefix: ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelector('#idName')")),(0,l.kt)("li",{parentName:"ol"},"Class with ",(0,l.kt)("inlineCode",{parentName:"li"},".")," prefix: ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelector('.className')")),(0,l.kt)("li",{parentName:"ol"},"Tag with specific class by chaining: ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelector('div.className')")),(0,l.kt)("li",{parentName:"ol"},"Element with two classes: ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelector('.className1.className2')")," (notice lack of space between classes)"),(0,l.kt)("li",{parentName:"ol"},"Element that is direct child of another element: ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelector('div > h2')")," (notice the ",(0,l.kt)("inlineCode",{parentName:"li"},">")," symbol between tags)"),(0,l.kt)("li",{parentName:"ol"},"Element that is any child another element: ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelector('div h2')")),(0,l.kt)("li",{parentName:"ol"},"Element that is any sibling (has the same parent): ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelector('p.className ~ h2')")," (this will capture ",(0,l.kt)("inlineCode",{parentName:"li"},"h2")," that is under the same parent as ",(0,l.kt)("inlineCode",{parentName:"li"},"p.className"),")"),(0,l.kt)("li",{parentName:"ol"},"Element that is adjecent sibling (has the same parent): ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelector('p.className + h2')")," (this will capture ",(0,l.kt)("inlineCode",{parentName:"li"},"h2")," that is under the same parent as ",(0,l.kt)("inlineCode",{parentName:"li"},"p.className")," and after that paragraph)"),(0,l.kt)("li",{parentName:"ol"},"Element with specific attribute: ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelector('[href]')")),(0,l.kt)("li",{parentName:"ol"},"Element with specific value of attribute: ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelector('input[type=\"checkbox\"]')")),(0,l.kt)("li",{parentName:"ol"},"One of the listed elements: ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelector('ul, ol')")),(0,l.kt)("li",{parentName:"ol"},"All of the listed elements: ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelectorAll('ul, ol')")),(0,l.kt)("li",{parentName:"ol"},"Elements targetet by ",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes"},"pseudo-class"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelectorAll('a:visited')")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-elements"},"Pseudo-element"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelectorAll('h1::first-letter')")),(0,l.kt)("li",{parentName:"ol"},"Element with negated selection: ",(0,l.kt)("inlineCode",{parentName:"li"},"document.querySelector('.className:not(div)')"))),(0,l.kt)("p",{parentName:"div"},"Sky is the limit, especially as you can chain all of the above into super query:"),(0,l.kt)("pre",{parentName:"div"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"document.querySelector('#content > article > div:nth-child(20) a:nth-child(1) > code');\n")),(0,l.kt)("p",{parentName:"div"},"However, whenever possible, optimise. Either by finding a better way to select the element or by adding an easily selectable attribute to that element in the page HTML."))),(0,l.kt)("p",null,"As you can see, there are many options you can leverage."),(0,l.kt)("h3",{id:"should-you-use-getelement-or-queryselector"},"Should you use getElement or querySelector?"),(0,l.kt)("p",null,"It depends on the purpose. The rule of thumb is that if one of the ",(0,l.kt)("inlineCode",{parentName:"p"},"getElement")," selectors can do the job, it's a better choice performance-wise (the longer HTML, the bigger difference). However, for more complex selections, the newer ",(0,l.kt)("inlineCode",{parentName:"p"},"querySelector")," family might be better or the only possible choice."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Good use cases for the querySelector family"',title:'"Good',use:!0,cases:!0,for:!0,the:!0,querySelector:!0,'family"':!0},"// Instead of using three getElement selectors (that wouldn't even work in this example, more on that in the next paragraph)\ndocument.getElementById('attributes-repeater').getElementsByClassName('DataCell').getElementsByTagName('tr');\n// you should use a single querySelectorAll selector\ndocument.querySelectorAll('#attributes-repeater .DataCell tr');\n\n// There are also cases where querySelector is the only choice\ndocument.querySelectorAll('input[type=\"checkbox\"]');\n")),(0,l.kt)("p",null,"As always, the devil lies in the details. While chained ",(0,l.kt)("inlineCode",{parentName:"p"},"getElement")," selectors will have better performance than clean ",(0,l.kt)("inlineCode",{parentName:"p"},"querySelector"),", there are three issues with the former:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Readability: after two or three chained selectors, the ",(0,l.kt)("inlineCode",{parentName:"li"},"getElement")," chain gets really hard to read and debug; the natural CSS3 style of ",(0,l.kt)("inlineCode",{parentName:"li"},"querySelector")," is straightforward."),(0,l.kt)("li",{parentName:"ol"},"Flexibility: you can only chain ",(0,l.kt)("inlineCode",{parentName:"li"},"getElements")," on single elements. Refering to the previous code sample, while the ",(0,l.kt)("inlineCode",{parentName:"li"},".getElementsByClassName('DataCell')")," called on single outcome of ",(0,l.kt)("inlineCode",{parentName:"li"},".getElementById('attributes-repeater')")," works, returned collection of outcomes would crash the ",(0,l.kt)("inlineCode",{parentName:"li"},".getElementsByTagName('tr')")," that works only on single element scope."),(0,l.kt)("li",{parentName:"ol"},"Loopability: outcomes of ",(0,l.kt)("inlineCode",{parentName:"li"},"getElements")," selection cannot be looped using ",(0,l.kt)("a",{parentName:"li",href:"/docs/js/js-loops#foreach"},(0,l.kt)("inlineCode",{parentName:"a"},"forEach()")),".")),(0,l.kt)("p",null,"My approach is to use the more flexible and readable ",(0,l.kt)("inlineCode",{parentName:"p"},"querySelector")," whenever performance is not a dealbreaker and switch where possible to the ",(0,l.kt)("inlineCode",{parentName:"p"},"getElement")," toolset for use cases where the performance is crucial."),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"You Should Know")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"You can assign your DOM selection to a variable. It allows you to reuse it in multiple places of your script and lets you limit the scope of the selection."),(0,l.kt)("p",{parentName:"div"},"You can do the latter by replacing the ",(0,l.kt)("inlineCode",{parentName:"p"},"document")," object with your variable - it will look for matching DOM elements only within the outcome of the previous selection."),(0,l.kt)("pre",{parentName:"div"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const form = document.querySelector('form');\nconst divsInForm = form.querySelectorAll('div.legalNotice'); // Returns only div tags with legalNotice class that are within your form\n")),(0,l.kt)("p",{parentName:"div"},"It works like chaining selectors and with the same limitation - you can chain only if the previous outcome is a single element."),(0,l.kt)("pre",{parentName:"div"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"/* \u2705 Chain from a single element to a collection - same outcome as previous code snippet */\ndocument.querySelector('form').querySelectorAll('div.legalNotice');\n\n/* \u274c Chain from a collection to a collection - will throw TypeError */\ndocument.querySelectorAll('form').querySelectorAll('div.legalNotice');\n\n/* \u2705 Chain from a single element (thanks to index) to a collection */\ndocument.querySelectorAll('form')[0].querySelectorAll('div.legalNotice');\n\n/* Of course, in real scenario, you should use a compound selector for the same result */\ndocument.querySelectorAll('form div.legalNotice');\n")))),(0,l.kt)("p",null,"Selecting elements is just the beginning. Once you pick them, you can ",(0,l.kt)("a",{parentName:"p",href:"#exploring-the-dom"},"explore"),", ",(0,l.kt)("a",{parentName:"p",href:"#traversing-the-dom"},"traverse")," and ",(0,l.kt)("a",{parentName:"p",href:"#manipulating-the-dom"},"manipulate")," the DOM. You can check what is available for the selected element with ",(0,l.kt)("inlineCode",{parentName:"p"},"console.dir(selectedElement)")," in the developer console."),(0,l.kt)("h2",{id:"exploring-the-dom"},"Exploring the DOM"),(0,l.kt)("p",null,"Once you select the page element, you can learn more about it, thanks to properties. There is a ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/Element%5D"},"long list")," of available features, so let's focus on the ones most useful in marketing automation and the real-time personalisation world."),(0,l.kt)("h3",{id:"attributes"},"attributes"),(0,l.kt)("p",null,"With ",(0,l.kt)("inlineCode",{parentName:"p"},".attributes")," property you can list all HTML attributes on selected element as a NamedNodeMap. What is more, you can drill down on those details to get specific values:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"/* <main id=\"content\" class=\"main-content\" role=\"main\">\u2026</main> */\ndocument.querySelector('#content').attributes;              // returns a Map with id, class and role\ndocument.querySelector('#content').attributes.class.value;  // returns 'main-content'\n")),(0,l.kt)("p",null,"While it is an excellent way of learning what attributes are used on a specific element, the attribute-specific shorthand properties will be more helpful in most scenarios."),(0,l.kt)("p",null,"You can also list the names of all available attributes using ",(0,l.kt)("inlineCode",{parentName:"p"},".getAttributesNames()"),". There is also the ",(0,l.kt)("inlineCode",{parentName:"p"},"getAttrubute()")," method that lets you pull a value of a specific attribute and a pair of condition checking methods: ",(0,l.kt)("inlineCode",{parentName:"p"},"hasAttributes()")," that checks whether the selected element has any attribute and ",(0,l.kt)("inlineCode",{parentName:"p"},"hasAttribute()")," that tells you if the selected element has a specified attribute."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"/* <main id=\"content\" class=\"main-content\" role=\"main\">\u2026</main> */\ndocument.querySelector('#content').getAttributesNames();    // returns ['id', 'class', 'role']\ndocument.querySelector('#content').getAttribute('role');    // returns 'main'\ndocument.querySelector('#content').hasAttributes();         // returns true\ndocument.querySelector('#content').hasAttribute('role');    // returns true\n")),(0,l.kt)("p",null,"This method is helpful for non-standard attributes that don't have a dedicated shorthand."),(0,l.kt)("h3",{id:"classlist-and-classname"},"classList and className"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".classList")," property lets you directly list all classes assigned to the selected element (in the form of DOMTokenList). It is excellent when you want to ",(0,l.kt)("a",{parentName:"p",href:"/docs/js/js-loops"},"loop")," through to find a specific class or ",(0,l.kt)("a",{parentName:"p",href:"#manipulating-the-dom"},"manipulate the DOM"),"."),(0,l.kt)("p",null,"On the other hand, when you want to do a simple ",(0,l.kt)("a",{parentName:"p",href:"/docs/js/js-if-and-switch"},"check or condition"),", ",(0,l.kt)("inlineCode",{parentName:"p"},".className")," is a great shorthand returning a string with all classes."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"/* <div class=\"page-wrapper category-api document-page\">\u2026</div> */\ndocument.querySelector('div.page-wrapper').classList;                           // returns an object with all the classes, length and value\ndocument.querySelector('div.page-wrapper').classList.contains('document-page'); // returns true\ndocument.querySelector('div.page-wrapper').classList.value;                     // returns 'page-wrapper category-api document-page'\ndocument.querySelector('div.page-wrapper').className;                           // shorthand of the previous, returns 'page-wrapper category-api document-page'\n")),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},".classList")," property is the bread and butter of page manipulation, as it allows you to add, remove, replace and toggle classes on an element. Think of hiding and displaying elements, changing the styles and other dynamic scenarios. More on that, in the ",(0,l.kt)("a",{parentName:"p",href:"#changing-attributes"},"changing attributes")," section."),(0,l.kt)("h3",{id:"id-and-tagname"},"id and tagName"),(0,l.kt)("p",null,"Similarly to class-related properties, a ",(0,l.kt)("inlineCode",{parentName:"p"},".id")," property returns the value of the id attribute and a ",(0,l.kt)("inlineCode",{parentName:"p"},".tagName")," property that returns the selected tag's name."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"/* <main id=\"content\" class=\"main-content\" role=\"main\">\u2026</main> */\ndocument.querySelector('.main-content').id;      // returns 'content'\ndocument.querySelector('.main-content').tagName; // returns 'main'\n")),(0,l.kt)("p",null,"Those two are less frequently used and mostly have some value when ",(0,l.kt)("a",{parentName:"p",href:"#traversing-the-dom"},"travelling through the DOM"),"."),(0,l.kt)("h3",{id:"innertext-and-innerhtml"},"innerText and innerHTML"),(0,l.kt)("p",null,"Another extremely important properties are ",(0,l.kt)("inlineCode",{parentName:"p"},".innerText")," and ",(0,l.kt)("inlineCode",{parentName:"p"},".innerHTML"),". They allow you to look into what is within the selected element."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},".innerText")," returns a plain text version of element content (including all child tags). Think copy-pasting fragment of the page into a chat."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Example output for header of this section"',title:'"Example',output:!0,for:!0,header:!0,of:!0,this:!0,'section"':!0},"document.querySelector('#innertext-and-innerhtml').innerText;\n// returns \".innerText and .innerHTML\"\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},".innerHTML"),", on the other hand, will return a full-blown HTML code of the selected element (including all child tags within). However, keep in mind that it will be the rendered HTML, not the original HTML (so the version adapted to your screen, your device, your context)."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Example output for header of this section"',title:'"Example',output:!0,for:!0,header:!0,of:!0,this:!0,'section"':!0},'document.querySelector(\'#innertext-and-innerhtml\').innerHTML;\n// returns ".innerText and .innerHTML<a class=\\"hash-link\\" href=\\"#innertext-and-innerhtml\\" title=\\"Direct link to heading\\"></a>"\n')),(0,l.kt)("p",null,"While it is already useful, those properties shine when you want to ",(0,l.kt)("a",{parentName:"p",href:"#changing-attributes"},"manipulate your page"),". More on that later."),(0,l.kt)("h3",{id:"hidden-and-style"},"hidden and style"),(0,l.kt)("p",null,"Finally, there are landing page must-haves - ",(0,l.kt)("inlineCode",{parentName:"p"},".hidden")," and ",(0,l.kt)("inlineCode",{parentName:"p"},".style"),". Those two properties describe the CSS of the selected element."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},".hidden")," is straightforward. It returns a boolean telling you whether the element is hidden from the frontend of the page."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},".style")," is much deeper, as it returns a whole object build with all possible ",(0,l.kt)("strong",{parentName:"p"},"inline")," CSS declarations for the element. You can then drill down to return a value of a specific declaration."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Example output for header of this section"',title:'"Example',output:!0,for:!0,header:!0,of:!0,this:!0,'section"':!0},"document.querySelector('#hidden-and-style').hidden;         // returns false\ndocument.querySelector('#hidden-and-style').style.display;  // returns ''\n")),(0,l.kt)("p",null,"As with properties mentioned previously, ",(0,l.kt)("inlineCode",{parentName:"p"},".style")," and ",(0,l.kt)("inlineCode",{parentName:"p"},".hidden")," truly shine when ",(0,l.kt)("a",{parentName:"p",href:"#changing-attributes"},"manipulating the DOM"),"."),(0,l.kt)("h2",{id:"traversing-the-dom"},"Traversing the DOM"),(0,l.kt)("p",null,"Think about the DOM as a complex hierarchy of elements. When you select a specific element, it is located somewhere within that hierarchy. And with the help of the properties, you can learn more about that web and travel through it."),(0,l.kt)("p",null,"Before jumping to the specific ways to travel through the page, let's settle the DOM naming convention for the hierarchy of elements:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="HTML snippet"',title:'"HTML','snippet"':!0},'<article class="main-page-content">\n    <h1>Main Header</h1>\n    <div>\n        <p>\n            <strong>Example paragraph</strong> with some written content and a <a href="https://mateuszdabrowski.pl">link</a>.\n        </p>\n        <p>\n            Yet another paragraph of this article.\n        </p>\n    </div>\n</article>\n')),(0,l.kt)("p",null,"Let's select the ",(0,l.kt)("inlineCode",{parentName:"p"},"div")," tag from the above structure using:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"document.querySelector('article.main-page-content > div'); // selects <div>\n")),(0,l.kt)("p",null,"As you can see, there are three relationships between the selected ",(0,l.kt)("inlineCode",{parentName:"p"},"div")," tag and the rest of the code:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"The selected ",(0,l.kt)("inlineCode",{parentName:"li"},"div")," tag is enclosed within ",(0,l.kt)("inlineCode",{parentName:"li"},'<article class="main-page-content">'),". The tag higher in the DOM hierarchy is called a ",(0,l.kt)("strong",{parentName:"li"},"parent"),"."),(0,l.kt)("li",{parentName:"ol"},"The selected ",(0,l.kt)("inlineCode",{parentName:"li"},"div")," tag is not alone within the ",(0,l.kt)("inlineCode",{parentName:"li"},'<article class="main-page-content">')," parent tag. There is also ",(0,l.kt)("inlineCode",{parentName:"li"},"h1"),". The tags at the same level of the DOM hierarchy are called ",(0,l.kt)("strong",{parentName:"li"},"siblings"),"."),(0,l.kt)("li",{parentName:"ol"},"The selected ",(0,l.kt)("inlineCode",{parentName:"li"},"div")," tag has two ",(0,l.kt)("inlineCode",{parentName:"li"},"p")," tags within itself. The tags lower in the DOM hierarchy are called ",(0,l.kt)("strong",{parentName:"li"},"children"),".")),(0,l.kt)("p",null,"To sum up, our ",(0,l.kt)("inlineCode",{parentName:"p"},"div")," tag has an ",(0,l.kt)("inlineCode",{parentName:"p"},"article")," as a parent, ",(0,l.kt)("inlineCode",{parentName:"p"},"h1")," as a sibling, and two ",(0,l.kt)("inlineCode",{parentName:"p"},"p")," as children. Then, the first ",(0,l.kt)("inlineCode",{parentName:"p"},"p")," has two inline children: ",(0,l.kt)("inlineCode",{parentName:"p"},"strong")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"a"),"."),(0,l.kt)("p",null,"Let's check how to leverage all those information."),(0,l.kt)("h3",{id:"parentelement"},"parentElement"),(0,l.kt)("p",null,"If you want to go up in the hierarchy from your selection, you can just use ",(0,l.kt)("inlineCode",{parentName:"p"},".parentElement")," (or ",(0,l.kt)("inlineCode",{parentName:"p"},".parentNode"),", which is nearly the same now)."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"document.querySelector('article.main-page-content > div').parentElement; // selects <article class=\"main-page-content\">\n")),(0,l.kt)("h3",{id:"previouselementsibling-and-nextelementsibling"},"previousElementSibling and nextElementSibling"),(0,l.kt)("p",null,"For traversing the sibling elements, you can use either ",(0,l.kt)("inlineCode",{parentName:"p"},".previousElementSibling")," or ",(0,l.kt)("inlineCode",{parentName:"p"},".nextElementSibling")," to jump to the previous or next element. If there is no such element, you will get ",(0,l.kt)("inlineCode",{parentName:"p"},"null"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"document.querySelector('article.main-page-content > div').previousElementSibling; // selects <h1>\ndocument.querySelector('article.main-page-content > div').nextElementSibling; // returns null\n")),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"You Should Know")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"You can also encounter similar properties - ",(0,l.kt)("inlineCode",{parentName:"p"},".previousSibling")," and ",(0,l.kt)("inlineCode",{parentName:"p"},".nextSibling"),". That pair is operating on HTML Nodes and will return for example whitespace between the elements (as ",(0,l.kt)("inlineCode",{parentName:"p"},"#test")," node) or HTML comments. Unless you are sure you need it, ",(0,l.kt)("inlineCode",{parentName:"p"},".previousElementSibling")," or ",(0,l.kt)("inlineCode",{parentName:"p"},".nextElementSibling")," are better choice."))),(0,l.kt)("h3",{id:"all-things-children"},"All things children"),(0,l.kt)("p",null,"When you want to go down in the hierarchy, you can use ",(0,l.kt)("inlineCode",{parentName:"p"},".children")," to get a Collection of HTML elements."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"document.querySelector('article.main-page-content > div').children; // returns collection of two <p> tags\n")),(0,l.kt)("p",null,"You can either ",(0,l.kt)("a",{parentName:"p",href:"/docs/js/js-loops"},"loop")," through those or pick a specific child with an index. Helpful here can be ",(0,l.kt)("inlineCode",{parentName:"p"},".childElementCount"),", which will show you the number of elements selected."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"document.querySelector('article.main-page-content > div').childElementCount; // returns 2\n")),(0,l.kt)("p",null,"The nice thing is that for the most popular selections - the first and last child - you can use a clean shorthands ",(0,l.kt)("inlineCode",{parentName:"p"},".firstElementChild")," and ",(0,l.kt)("inlineCode",{parentName:"p"},".lastElementChild"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"/* \u274c Unnecessary complex selection of the first and last child */\ndocument.querySelector('article.main-page-content > div').children[0]; // selects first child\ndocument.querySelector('article.main-page-content > div').children[document.querySelector('article.main-page-content > div').childElementCount - 1]; // selects last child\n\n/* \u2705 Optimised and readable selection of first and last child */\ndocument.querySelector('article.main-page-content > div').firstElementChild; // selects first child\ndocument.querySelector('article.main-page-content > div').lastElementChild;  // selects last child\n")),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"You Should Know")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"Like with sibling selection, here also you have set of similar properties - ",(0,l.kt)("inlineCode",{parentName:"p"},".childNodes"),", ",(0,l.kt)("inlineCode",{parentName:"p"},".firstChild"),", ",(0,l.kt)("inlineCode",{parentName:"p"},".lastChild"),". All three work on Nodes, so those will pick up not only elements but also text (whitespace) and comments. Unless you are sure you need it, ",(0,l.kt)("inlineCode",{parentName:"p"},".children"),", ",(0,l.kt)("inlineCode",{parentName:"p"},".firstElementChild")," and ",(0,l.kt)("inlineCode",{parentName:"p"},".lastElementChild")," are better choice."))),(0,l.kt)("h3",{id:"the-power-of-dom-traversing"},"The power of DOM traversing"),(0,l.kt)("p",null,"Ok, we know how to traverse the DOM, but why should we? The beauty of using the properties mentioned above is that you can leverage all ",(0,l.kt)("a",{parentName:"p",href:"#exploring-the-dom"},"exploratory properties")," after traversing."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"document.querySelector('article.main-page-content > div').parentElement.className; // returns \"main-page-content\"\n")),(0,l.kt)("p",null,"You can also mix and match the traversing properties to jump multiple hierarchy levels."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"document.querySelector('article.main-page-content > div').firstElementChild.lastElementChild.href // returns \"https://mateuszdabrowski.pl/\"\n")),(0,l.kt)("p",null,"Finally, you are not limited by the need to know the exact path from the currently selected element to another one ",(0,l.kt)("strong",{parentName:"p"},"higher in the hierarchy")," that you are interested in. You can leverage the ",(0,l.kt)("inlineCode",{parentName:"p"},".closest")," method to find it using the same CCS3 selection as with ",(0,l.kt)("a",{parentName:"p",href:"#accessing-the-dom"},(0,l.kt)("inlineCode",{parentName:"a"},"querySelector")),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"document.querySelector('article.main-page-content > div').closest('.main-page-content'); // selects <article class=\"main-page-content\">\n")),(0,l.kt)("p",null,"Remember that ",(0,l.kt)("inlineCode",{parentName:"p"},".closest")," can return the initially selected element if it fulfils the new selection. If you want to stop it from happening, you can just chain it after ",(0,l.kt)("inlineCode",{parentName:"p"},".parentElement"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"document.querySelector('article.main-page-content > div').parentElement.closest('.main-page-content'); // selects <article class=\"main-page-content\">\n")),(0,l.kt)("h2",{id:"manipulating-the-dom"},"Manipulating the DOM"),(0,l.kt)("p",null,"Everything discussed up to this point was nice but not breathtaking. Time to change it and jump straight into the real reason it is worth learning about the DOM. The ins and outs of manipulating it with JavaScript methods."),(0,l.kt)("h3",{id:"addeventlistener"},"addEventListener"),(0,l.kt)("p",null,"One of the critical manipulation methods for marketing automation is adding events with ",(0,l.kt)("inlineCode",{parentName:"p"},".addEventListener"),". This method lets you perform some actions (a function) given a specific behaviour."),(0,l.kt)("p",null,"In simpler words, you can tell the browser to execute a JavaScript function when the user clicks a button. Or moves the mouse out of the page to close it or change a tab. Or perform any other event you configure. You do it by attaching a specified Event Listener to a document, window or selected element:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Example of attaching Click-based Event Listener on a <button> that logs click details to console"',title:'"Example',of:!0,attaching:!0,"Click-based":!0,Event:!0,Listener:!0,on:!0,a:!0,"<button>":!0,that:!0,logs:!0,click:!0,details:!0,to:!0,'console"':!0},"document.querySelector('button').addEventListener('click', event => console.log(event));\n")),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"You Should Know")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"Using anonymous functions like in the example above is ",(0,l.kt)("strong",{parentName:"p"},"not recommended"),". Each anonymous function is unique for JavaScript, even if it has the same code within. This leads to two issues:"),(0,l.kt)("ol",{parentName:"div"},(0,l.kt)("li",{parentName:"ol"},"You may add multiple instances of the same anonymous function to a single element (no deduplication). It will lead to a negative performance impact and the function being triggered numerous times on event."),(0,l.kt)("li",{parentName:"ol"},"You cannot remove such an anonymous Event Listener.")),(0,l.kt)("p",{parentName:"div"},"In real-world scenarios, use named functions (unless you are absolutely sure what you are doing and have booked some time for debugging in the future):"),(0,l.kt)("pre",{parentName:"div"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function consoleLogEvent(event) {\n    console.log(event)\n}\n\ndocument.querySelector('button').addEventListener('click', consoleLogEvent);\n")),(0,l.kt)("p",{parentName:"div"},"It will allow you to easily remove Event Listener (by referencing the target, event type and named function) once it is no longer needed:"),(0,l.kt)("pre",{parentName:"div"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"document.querySelector('button').removeEventListener('click', consoleLogEvent);\n")))),(0,l.kt)("h4",{id:"event-types"},"Event types"),(0,l.kt)("p",null,"There are over a hundred available events that you can use, so I will focus only on the most useful ones for our Marketing Automation needs."),(0,l.kt)("h5",{id:"click"},"click"),(0,l.kt)("p",null,"Capturing a click event is probably the most popular event in the world wide web. Technically, it's a shorthand for two separate events (that you can listen for separately) - ",(0,l.kt)("inlineCode",{parentName:"p"},"mousedown")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"mouseup"),"."),(0,l.kt)("p",null,"The interesting part is that the event captures the number of consecutive clicks happening in short timeframe, so you can distinguish single, double, tripleclicks:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const logClickCount = event => console.log(`Click count: ${event.detail}`);\ndocument.querySelector('button').addEventListener('click', logClickCount);\n")),(0,l.kt)("h5",{id:"submit"},"submit"),(0,l.kt)("p",null,"Another marketing must-have is the submit event. It is triggered on the valid submission of a form."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const logSubmissionTimestamp = event => console.log(`Submission timestamp: ${event.timeStamp}`); // miliseconds since the page/script load\ndocument.querySelector('form').addEventListener('submit', logSubmissionTimestamp);\n")),(0,l.kt)("p",null,"The key feature with submit events is possibility to stop the default form processing with ",(0,l.kt)("inlineCode",{parentName:"p"},".preventDefault")," method:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:"{3}","{3}":!0},"document.querySelector('form').addEventListener('submit',\n    event => {\n        event.preventDefault();\n        const formData = Object.fromEntries(new FormData(event.target));\n        console.log(formData);\n    }\n);\n")),(0,l.kt)("p",null,"This approach allows you to implement custom validation or data processing while benefiting from the HTML5 form backbone. Perfect when you want to push your form submission to a ",(0,l.kt)("a",{parentName:"p",href:"/docs/usecase/sfmc-code-resource#good-form-backend-with-code-resource"},"Code Resource"),"."),(0,l.kt)("h5",{id:"focus--blur"},"focus & blur"),(0,l.kt)("p",null,"Other events that are very useful for forms are focus and blur. The first one is triggered when an element gets into focus; the other on the opposite. What does it mean? Let's say you have a form. When the user clicks on the input, the input element gets focused. When he clicks on something else (another element, submit button, or just anywhere else), it triggers a blur event."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const logInputValue = event => console.log(event.target.value);\ndocument.querySelector('input[type=\"email\"]').addEventListener('blur', logInputValue);\n")),(0,l.kt)("p",null,"Using blur events can be great for triggering asynchronous checks on the provided data. For example, the user finishes writing the email and goes to the following field. The Event Listener can then make an asynchronous call to the ",(0,l.kt)("a",{parentName:"p",href:"/docs/usecase/sfmc-code-resource#good-form-backend-with-code-resource"},"Code Resource backend"),". It will look up whether this record is an existing contact or needs to be created in Salesforce Sales Cloud to generate the Contact ID and return the Subscriber Key back to the form's hidden field."),(0,l.kt)("h5",{id:"mouseenter--mouseleave"},"mouseenter & mouseleave"),(0,l.kt)("p",null,"With mouseetner and mouseleave, you can trigger events when the user moves the pointer in or out of a specific element. The caveat - there needs to be a pointer, so the solution is not working for touchscreen users."),(0,l.kt)("p",null,"Still, it can be used to capture which part of the website is getting hovered over with a mouse (and for how long) or to create those annoying pop-ups trying to guilt-trip you into staying on the page:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const onLeavePopUp = alert('Sad Alert');\ndocument.documentElement.addEventListener('mouseleave', onLeavePopUp);\n")),(0,l.kt)("p",null,"Those are just a few key events that you can capture with ",(0,l.kt)("inlineCode",{parentName:"p"},".addEventListener"),". There is much more available, like keydown & keyup, select, scroll, paste, error. Check out the complete list on ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/Events#event_listing"},"MDN"),"."),(0,l.kt)("h3",{id:"changing-attributes"},"Changing attributes"),(0,l.kt)("p",null,"Events are fantastic, but there is something even better. Attribute manipulation. With it, you can change your website in real-time according to your logic. How? By going one step further with what you already learned above."),(0,l.kt)("p",null,"For example, you can add, remove and toggle (add if it wasn't there or remove if it was) CSS classes with ",(0,l.kt)("a",{parentName:"p",href:"#classlist-and-classname"},(0,l.kt)("inlineCode",{parentName:"a"},".classlist")),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"/* <div class=\"page-wrapper category-api document-page\">\u2026</div> */\ndocument.querySelector('div.page-wrapper').classList.remove('category-api');    // removes .categori-api\ndocument.querySelector('div.page-wrapper').classList.add('category-api');       // adds .categori-api back\ndocument.querySelector('div.page-wrapper').classList.toggle('category-api');    // removes .categori-api as it is on the element\n")),(0,l.kt)("p",null,"And just like you could get custom ",(0,l.kt)("a",{parentName:"p",href:"#attributes"},"attributes"),", you can also create them with ",(0,l.kt)("inlineCode",{parentName:"p"},".setAttribute"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"/* <main id=\"content\" class=\"main-content\" role=\"main\">\u2026</main> */\ndocument.querySelector('#content').setAttribute('data-columns', '3'); // returns 'main'\n")),(0,l.kt)("p",null,"But probably the most useful feature is possibility to alter the properties:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"/* <input type=\"checkbox\" id=\"isOptedIn\" name=\"isOptedIn\"> */\ndocument.querySelector('#isOptedIn').required;          // returns false, as checkbox is not required\ndocument.querySelector('#isOptedIn').required = true;   // makes the checkbox required\n\ndocument.querySelector('#isOptedIn').checked;           // returns false, as checkbox is not checked\ndocument.querySelector('#isOptedIn').checked = true;    // checks the checkbox\n\ndocument.querySelector('#isOptedIn').hidden;            // returns false, as checkbox is not hidden\ndocument.querySelector('#isOptedIn').hidden = true;     // hides the checkbox\n")),(0,l.kt)("p",null,"You can do the same with ",(0,l.kt)("a",{parentName:"p",href:"#innerText-and-innerHTML"},(0,l.kt)("inlineCode",{parentName:"a"},".innerText")," and ",(0,l.kt)("inlineCode",{parentName:"a"},".innerHTML")),", ",(0,l.kt)("a",{parentName:"p",href:"#hidden-and-style"},(0,l.kt)("inlineCode",{parentName:"a"},".style.display"))," and more."),(0,l.kt)("p",null,"Finally, you can mix DOM manipulation methods and change attributes on specific ",(0,l.kt)("a",{parentName:"p",href:"#event-types"},"events"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:"{5}","{5}":!0},"document.querySelector('form').addEventListener('submit',\n    event => {\n        event.preventDefault();\n        const formData = Object.fromEntries(new FormData(event.target));\n        event.target.innerText = 'Submitted!'; // Replaces whole form with \"Submitted!\"\n    }\n);\n")),(0,l.kt)("p",null,"Document Object Model can be used to adapt your website in real-time, fill in hidden fields with backend calls or even automate your processes through developer console. You are only limited by your imagination (and website performance)."),(0,l.kt)("h2",{id:"use-cases"},"Use Cases"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("a",{parentName:"li",href:"/docs/usecase/tailor-with-data"},"Tailor with Data")," - how to leverage DOM manipulation and personalisation strings to create dynamic experiences for your customers.")))}h.isMDXComponent=!0}}]);