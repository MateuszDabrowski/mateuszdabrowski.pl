"use strict";(self.webpackChunkmd=self.webpackChunkmd||[]).push([[1872],{4137:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),m=c(n),p=r,h=m["".concat(l,".").concat(p)]||m[p]||u[p]||s;return n?a.createElement(h,i(i({ref:t},d),{},{components:n})):a.createElement(h,i({ref:t},d))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,i=new Array(s);i[0]=p;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[m]="string"==typeof e?e:r,i[1]=o;for(var c=2;c<s;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},1872:(e,t,n)=>{n.d(t,{m:()=>s});var a=n(7294);const r="leadText_qzwo",s=e=>{let{content:t}=e;return a.createElement(a.Fragment,null,a.createElement("p",{id:r},t))}},5209:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var a=n(7462),r=(n(7294),n(4137)),s=n(1872);const i={id:"sfmc-sql-from",title:"SFMC SQL From",sidebar_label:"From",description:"Tell the SQL query FROM where you need the data.",image:"img/og/og-image-sql-from.png",tags:["Marketing Cloud","SQL"]},o=void 0,l={unversionedId:"sql/sfmc-sql-from",id:"sql/sfmc-sql-from",title:"SFMC SQL From",description:"Tell the SQL query FROM where you need the data.",source:"@site/docs/sql/sfmc-sql-from.mdx",sourceDirName:"sql",slug:"/sql/sfmc-sql-from",permalink:"/docs/sql/sfmc-sql-from",draft:!1,editUrl:"https://github.com/MateuszDabrowski/mateuszdabrowski.pl/edit/master/docs/sql/sfmc-sql-from.mdx",tags:[{label:"Marketing Cloud",permalink:"/docs/tags/marketing-cloud"},{label:"SQL",permalink:"/docs/tags/sql"}],version:"current",lastUpdatedBy:"Mateusz D\u0105browski",lastUpdatedAt:1672049341,formattedLastUpdatedAt:"Dec 26, 2022",frontMatter:{id:"sfmc-sql-from",title:"SFMC SQL From",sidebar_label:"From",description:"Tell the SQL query FROM where you need the data.",image:"img/og/og-image-sql-from.png",tags:["Marketing Cloud","SQL"]},sidebar:"docs",previous:{title:"Select",permalink:"/docs/sql/sfmc-sql-select"},next:{title:"Join",permalink:"/docs/sql/sfmc-sql-join"}},c={},d=[{value:"Basic FROM",id:"basic-from",level:2},{value:"System Data Views",id:"system-data-views",level:2},{value:"Enterprise Data Extension",id:"enterprise-data-extension",level:2},{value:"Enterprise System Data Views",id:"enterprise-system-data-views",level:2}],m={toc:d};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(s.m,{content:"Tell the SQL query FROM where you need the data",mdxType:"LeadText"}),(0,r.kt)("h2",{id:"basic-from"},"Basic FROM"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/docs/sql/sfmc-sql-select"},(0,r.kt)("inlineCode",{parentName:"a"},"SELECT"))," statement alone won't do much. In most cases, once you have selected data you want to work with, you also need to pick the table (Data Extension or System Data View) ",(0,r.kt)("inlineCode",{parentName:"p"},"FROM")," which the query will take the required columns. The code for this is simple:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql",metastring:'{4} title="Get ContactKey and EmailAddress from Data Extension named MasterSubscriberDE"',"{4}":!0,title:'"Get',ContactKey:!0,and:!0,EmailAddress:!0,from:!0,Data:!0,Extension:!0,named:!0,'MasterSubscriberDE"':!0},"SELECT\n      ContactKey\n    , EmailAddress\nFROM MasterSubscriberDE\n")),(0,r.kt)("p",null,"Just as with column names, if the name of your Data Extension has spaces or hyphens in it, be sure to enclose it in brackets."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql",metastring:"{4}","{4}":!0},"SELECT\n      ContactKey\n    , EmailAddress\nFROM [Master-Subscriber DE]\n")),(0,r.kt)("p",null,"There are, however, two cases specific to Salesforce Marketing Cloud that adds a twist. System Data Views and Enterprise Data Extensions."),(0,r.kt)("h2",{id:"system-data-views"},"System Data Views"),(0,r.kt)("p",null,"Salesforce Marketing Cloud is partially hiding the ",(0,r.kt)("a",{parentName:"p",href:"/docs/config/sfmc-system-data-views"},"System Data Views")," Data Extensions that store tracking data. Think about Email Sent history, Opens and Clicks, Bounces and Complaints. You can find there the tracking data for SMS and Social channels. Also, more technical data points, like Jobs and Enterprise Attributes, are available in the System Data Views. You won't find them in the User Interface but can query them with the SQL. The difference related to those tables is in naming convention. When querying them, you must leverage ",(0,r.kt)("inlineCode",{parentName:"p"},"_")," prefix:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql",metastring:"{8}","{8}":!0},"SELECT\n      JobID\n    , EmailID\n    , EmailName\n    , EmailSubject\n    , EmailSendDefinition\n    , DeliveredTime\nFROM _Job\n")),(0,r.kt)("h2",{id:"enterprise-data-extension"},"Enterprise Data Extension"),(0,r.kt)("p",null,"Here the approach changes depending on where you run your Query. Shared Data Extensions and Synchronized Data Extensions are considered Enterprise and located on the Parent Business Unit level. It means that when you want to query them from the Parent, you need to write it the same way as for ",(0,r.kt)("a",{parentName:"p",href:"#Basic-from"},"standard Data Extensions"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql",metastring:"{4}","{4}":!0},"SELECT\n      ContactKey\n    , EmailAddress\nFROM SharedDataExtension\n")),(0,r.kt)("p",null,"However, if you want to query them from the child Business Unit level, you will have to use a unique prefix - ",(0,r.kt)("inlineCode",{parentName:"p"},"Ent."),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql",metastring:"{4}","{4}":!0},"SELECT\n      ContactKey\n    , EmailAddress\nFROM Ent.SharedDataExtension\n")),(0,r.kt)("p",null,"The same is true for Synchronized Data Extensions. If you want to pull data from a child Business Unit, you will need the ",(0,r.kt)("inlineCode",{parentName:"p"},"Ent.")," prefix:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql",metastring:"{4}","{4}":!0},"SELECT\n      Id    AS SubscriberKey\n    , Email AS EmailAddress\nFROM Ent.Contact_Salesforce\n")),(0,r.kt)("p",null,"Remember that account permissions restrictions may apply."),(0,r.kt)("admonition",{title:"You Should Know",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"In the past, the opposite was also available. You could query Data Extension located on child Business Unit from the Parent. To do this, you had to use the MID of the child BU (visible next to BU name on the Business Unit selection drop down) as a prefix:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql",metastring:'{4} title="On Parent BU query DataExtensionOnChildBU from Child BU with MID 5123456"',"{4}":!0,title:'"On',Parent:!0,BU:!0,query:!0,DataExtensionOnChildBU:!0,from:!0,Child:!0,with:!0,MID:!0,'5123456"':!0},"SELECT\n      ContactKey\n    , EmailAddress\nFROM 5123456.DataExtensionOnChildBU\n")),(0,r.kt)("p",{parentName:"admonition"},"Since 2020, trying to do so will result in an error: ",(0,r.kt)("inlineCode",{parentName:"p"},"An error occurred while checking the query syntax. Errors: The 123456.DataExtensionOnChildBU table has a multi-part specification. This is not allowed.")," The workaround is to use Shared Data Extensions."),(0,r.kt)("p",{parentName:"admonition"},"Marketing Cloud legend says that there are still some instances that support this legacy type of querying. You might try it, but even if you are the lucky one, I would recommend using the Shared Data Extensions to worry not about unexpected Automation errors in the future.")),(0,r.kt)("h2",{id:"enterprise-system-data-views"},"Enterprise System Data Views"),(0,r.kt)("p",null,"Using ",(0,r.kt)("a",{parentName:"p",href:"#enterprise-data-extension"},(0,r.kt)("inlineCode",{parentName:"a"},"Ent."))," prefix on a System Data View might give you different results."),(0,r.kt)("p",null,"For example, if you query _Subscribers on child Business Unit, you will receive data only for the subscribers stored in this child BU."),(0,r.kt)("p",null,"By adding the ",(0,r.kt)("inlineCode",{parentName:"p"},"Ent.")," prefix, however, you can query all your subscribers on the Parent BU:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql",metastring:"{6}","{6}":!0},"SELECT\n      SubscriberKey\n    , EmailAddress\n    , DateJoined\n    , DateUnsubscribed\nFROM Ent._Subscribers\n")),(0,r.kt)("p",null,"When selecting Data Extensions to pull data from, remember the best practice to avoid ones spanning a cumulative field width greater than 4000 characters. They will badly impact the performance of your query. If needed, consider splitting your query into multiple consecutive queries."))}u.isMDXComponent=!0}}]);