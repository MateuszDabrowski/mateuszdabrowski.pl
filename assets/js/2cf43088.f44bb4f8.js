"use strict";(self.webpackChunkmd=self.webpackChunkmd||[]).push([[6167],{4137:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>g});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=p(a),m=o,g=c["".concat(s,".").concat(m)]||c[m]||d[m]||r;return a?n.createElement(g,i(i({ref:t},u),{},{components:a})):n.createElement(g,i({ref:t},u))}));function g(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:o,i[1]=l;for(var p=2;p<r;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},425:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(7294),o=a(6010);const r="tabItem_Ymn6";function i(e){let{children:t,hidden:a,className:i}=e;return n.createElement("div",{role:"tabpanel",className:(0,o.Z)(r,i),hidden:a},t)}},3992:(e,t,a)=>{a.d(t,{Z:()=>S});var n=a(7462),o=a(7294),r=a(6010),i=a(2957),l=a(6550),s=a(5238),p=a(3609),u=a(2560);function c(e){return function(e){return o.Children.map(e,(e=>{if((0,o.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))}(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:o}}=e;return{value:t,label:a,attributes:n,default:o}}))}function d(e){const{values:t,children:a}=e;return(0,o.useMemo)((()=>{const e=t??c(a);return function(e){const t=(0,p.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function m(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function g(e){let{queryString:t=!1,groupId:a}=e;const n=(0,l.k6)(),r=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,s._X)(r),(0,o.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(n.location.search);t.set(r,e),n.replace({...n.location,search:t.toString()})}),[r,n])]}function h(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,r=d(e),[i,l]=(0,o.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:r}))),[s,p]=g({queryString:a,groupId:n}),[c,h]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,r]=(0,u.Nk)(a);return[n,(0,o.useCallback)((e=>{a&&r.set(e)}),[a,r])]}({groupId:n}),k=(()=>{const e=s??c;return m({value:e,tabValues:r})?e:null})();(0,o.useEffect)((()=>{k&&l(k)}),[k]);return{selectedValue:i,selectValue:(0,o.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),p(e),h(e)}),[p,h,r]),tabValues:r}}var k=a(1048);const f="tabList__CuJ",y="tabItem_LNqP";function b(e){let{className:t,block:a,selectedValue:l,selectValue:s,tabValues:p}=e;const u=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.o5)(),d=e=>{const t=e.currentTarget,a=u.indexOf(t),n=p[a].value;n!==l&&(c(t),s(n))},m=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const a=u.indexOf(e.currentTarget)+1;t=u[a]??u[0];break}case"ArrowLeft":{const a=u.indexOf(e.currentTarget)-1;t=u[a]??u[u.length-1];break}}t?.focus()};return o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":a},t)},p.map((e=>{let{value:t,label:a,attributes:i}=e;return o.createElement("li",(0,n.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:e=>u.push(e),onKeyDown:m,onClick:d},i,{className:(0,r.Z)("tabs__item",y,i?.className,{"tabs__item--active":l===t})}),a??t)})))}function N(e){let{lazy:t,children:a,selectedValue:n}=e;if(t){const e=a.find((e=>e.props.value===n));return e?(0,o.cloneElement)(e,{className:"margin-top--md"}):null}return o.createElement("div",{className:"margin-top--md"},a.map(((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==n}))))}function v(e){const t=h(e);return o.createElement("div",{className:(0,r.Z)("tabs-container",f)},o.createElement(b,(0,n.Z)({},e,t)),o.createElement(N,(0,n.Z)({},e,t)))}function S(e){const t=(0,k.Z)();return o.createElement(v,(0,n.Z)({key:String(t)},e))}},1872:(e,t,a)=>{a.d(t,{m:()=>r});var n=a(7294);const o="leadText_qzwo",r=e=>{let{content:t}=e;return n.createElement(n.Fragment,null,n.createElement("p",{id:o},t))}},9223:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>p,default:()=>g,frontMatter:()=>s,metadata:()=>u,toc:()=>d});var n=a(7462),o=(a(7294),a(4137)),r=a(3992),i=a(425),l=a(1872);const s={id:"sfmc-cloud-page-apps",title:"Solve with Cloud Page Apps",description:"Create micro applications tailored to your organisation needs using only Salesforce Marketing Cloud features.",image:"img/og/og-image-solve-with-cloud-page-apps.png",tags:["Marketing Cloud","SSJS","AMPScript","Snippet","Cloud Page","App"]},p=void 0,u={unversionedId:"ssjs/snippets/sfmc-cloud-page-apps",id:"ssjs/snippets/sfmc-cloud-page-apps",title:"Solve with Cloud Page Apps",description:"Create micro applications tailored to your organisation needs using only Salesforce Marketing Cloud features.",source:"@site/docs/ssjs/snippets/sfmc-cloud-page-apps.mdx",sourceDirName:"ssjs/snippets",slug:"/ssjs/snippets/sfmc-cloud-page-apps",permalink:"/docs/ssjs/snippets/sfmc-cloud-page-apps",draft:!1,editUrl:"https://github.com/MateuszDabrowski/mateuszdabrowski.pl/edit/master/docs/ssjs/snippets/sfmc-cloud-page-apps.mdx",tags:[{label:"Marketing Cloud",permalink:"/docs/tags/marketing-cloud"},{label:"SSJS",permalink:"/docs/tags/ssjs"},{label:"AMPScript",permalink:"/docs/tags/amp-script"},{label:"Snippet",permalink:"/docs/tags/snippet"},{label:"Cloud Page",permalink:"/docs/tags/cloud-page"},{label:"App",permalink:"/docs/tags/app"}],version:"current",lastUpdatedBy:"Mateusz D\u0105browski",lastUpdatedAt:1672049341,formattedLastUpdatedAt:"Dec 26, 2022",frontMatter:{id:"sfmc-cloud-page-apps",title:"Solve with Cloud Page Apps",description:"Create micro applications tailored to your organisation needs using only Salesforce Marketing Cloud features.",image:"img/og/og-image-solve-with-cloud-page-apps.png",tags:["Marketing Cloud","SSJS","AMPScript","Snippet","Cloud Page","App"]},sidebar:"snippets",previous:{title:"SSJS Script Template",permalink:"/docs/ssjs/snippets/ssjs-script-template"},next:{title:"MobileConnect Phone Change",permalink:"/docs/ssjs/snippets/ssjs-mobileconnect-phone-change"}},c={},d=[{value:"Cloud Page Apps: what and why",id:"cloud-page-apps-what-and-why",level:2},{value:"When out-of-the-box features are not enough",id:"when-out-of-the-box-features-are-not-enough",level:3},{value:"Out-of-the-box approach to out-of-the-box feature",id:"out-of-the-box-approach-to-out-of-the-box-feature",level:3},{value:"Build your dream",id:"build-your-dream",level:2},{value:"Cloud Page Apps step by step",id:"cloud-page-apps-step-by-step",level:2},{value:"Create your first Marketing Cloud micro application",id:"create-your-first-marketing-cloud-micro-application",level:3},{value:"A Good application is a secure application",id:"a-good-application-is-a-secure-application",level:3},{value:"API Integration Component",id:"api-integration-component",level:4},{value:"API Authorisation",id:"api-authorisation",level:4},{value:"API Authentication with Token",id:"api-authentication-with-token",level:4},{value:"Capture your Cloud Page App usage",id:"capture-your-cloud-page-app-usage",level:4},{value:"Secured Cloud Page App Template",id:"secured-cloud-page-app-template",level:3},{value:"Implementation Sum Up",id:"implementation-sum-up",level:2}],m={toc:d};function g(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)(l.m,{content:"Create micro applications tailored to your organisation needs using only Salesforce Marketing Cloud features.",mdxType:"LeadText"}),(0,o.kt)("h2",{id:"cloud-page-apps-what-and-why"},"Cloud Page Apps: what and why"),(0,o.kt)("h3",{id:"when-out-of-the-box-features-are-not-enough"},"When out-of-the-box features are not enough"),(0,o.kt)("p",null,"Salesforce Marketing Cloud offers a multitude of options. With all the Studios, Builders, and other Salesforce-ecosystem cross-sells, you can deliver nearly anything. Nearly."),(0,o.kt)("p",null,"There will always be some business processes or requirements that are too niche or too unique to be covered out-of-the-box. Sometimes they can be delivered with what is available after some compromises. Sometimes only custom development can help."),(0,o.kt)("p",null,"Depending on the use case and company resources, you can overcome such challenges in two ways. By shopping at AppExchange - Salesforce App Store with 3rd Party solutions - or by building a custom application connected to Marketing Cloud with APIs (for example, leveraging yet another Salesforce product - Heroku)."),(0,o.kt)("p",null,"AppExchange might be a great idea if you can find a product solving your problem, but it will add a recurring cost to your budget. On the other hand, a fully-fledged custom application might deliver precisely what you need but create considerable up-front cost (in either money for external developers or time for an in-house team) and require maintenance."),(0,o.kt)("p",null,"There is, however, the third path. One that can be perfect if you have a necessary but relatively small requirement for internally used power-up and would instead go lean on both budget and time \u2014 Marketing Cloud micro application."),(0,o.kt)("h3",{id:"out-of-the-box-approach-to-out-of-the-box-feature"},"Out-of-the-box approach to out-of-the-box feature"),(0,o.kt)("p",null,"Marketing Cloud micro application offers AppExchange-style deep integration with Marketing Cloud platform and solution flexibility of custom development. In short, it is an application hosted on a Cloud Page and available via the main menu of Marketing Cloud. A Cloud Page App."),(0,o.kt)("p",null,"The good? You can use Marketing Cloud programmatic languages (SSJS and AMPScript) with all their nifty built-in functions to control the assets and behaviours of the SFMC platform and connected Sales & Service Clouds. You can also leverage the APIs to gather even more power and pull external logic and data. All this without having to care about hosting, scaling and integration. Available directly from the Marketing Cloud menu. And cost? Just a super message for loading a Cloud Page."),(0,o.kt)("p",null,"The bad? It is suitable for relatively simple apps. Think about a single front-end page powered by an SSJS or AMPScript backend on a ",(0,o.kt)("a",{parentName:"p",href:"/docs/config/sfmc-code-resource"},"Code Resource"),". Of course, you can try to build something more complex, but you may quickly get into a place where the whole endeavour would have been easier with an outside-hosted application."),(0,o.kt)("h2",{id:"build-your-dream"},"Build your dream"),(0,o.kt)("p",null,"So what can you do with such a solution? Possibilities are endless, but to share a few use cases:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Marketing Cloud Asset Viewer that allows you to quickly locate, for example, a Data Extension or Content asset."),(0,o.kt)("li",{parentName:"ul"},"Data Extension Analyzer for quick data analysis or even visualisation of values from a selected Data Extension."),(0,o.kt)("li",{parentName:"ul"},"KPI Dashboard displaying the most critical data for understanding your communication's current state - or even related data from Sales or Service Cloud imported using functions enabled by Marketing Cloud Connect."),(0,o.kt)("li",{parentName:"ul"},"Deliverability Dashboard pulling data from Marketing Cloud and external deliverability monitoring and alerting tools."),(0,o.kt)("li",{parentName:"ul"},"Documentation or FAQ related to your company processes and best practices that everyone should follow when building customer experience through Marketing Cloud."),(0,o.kt)("li",{parentName:"ul"},"Templated Journey creator to deploy tested flows for most used campaigns in a single click.")),(0,o.kt)("p",null,"Anything related to Marketing Cloud that you wish could be a bit more automated or easy can be a good idea for a micro application approach."),(0,o.kt)("h2",{id:"cloud-page-apps-step-by-step"},"Cloud Page Apps step by step"),(0,o.kt)("h3",{id:"create-your-first-marketing-cloud-micro-application"},"Create your first Marketing Cloud micro application"),(0,o.kt)("p",null,"Implementation is very straightforward, and you can do it in few minutes:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},'Create a simple Cloud Page (blank page with a "Hello World" will do the job for now).'),(0,o.kt)("li",{parentName:"ol"},"Publish it and copy the URL of the Cloud Page."),(0,o.kt)("li",{parentName:"ol"},"Go to Marketing Cloud Setup -> Apps -> Installed Packages and create a New Package."),(0,o.kt)("li",{parentName:"ol"},"Add a ",(0,o.kt)("inlineCode",{parentName:"li"},"Marketing Cloud App")," Component to the Package and paste the Cloud Page URL in both Endpoint fields and Save.")),(0,o.kt)("p",null,"That's all. You just created your first Marketing Cloud micro application. Refresh Marketing Cloud to see it available in the main menu under the AppExchange icon. Now it's time to build up your solution to solve the business need."),(0,o.kt)("h3",{id:"a-good-application-is-a-secure-application"},"A Good application is a secure application"),(0,o.kt)("p",null,"Your micro application is now available from the Marketing Cloud menu. But unfortunately, it can also be accessed from any other place, as it is still just a simple Cloud Page. It is, of course, not ideal. You don't want random people to access your API-fueled solution."),(0,o.kt)("h4",{id:"api-integration-component"},"API Integration Component"),(0,o.kt)("p",null,"Thankfully, you can leverage the already created Installed Package to secure the micro application cleanly. To do so, add yet another Component to the Package - this time, you will need API Integration one. Select Web App integration type and paste your micro application Cloud Page URL to the Redirect URI field."),(0,o.kt)("p",null,"You don't need to select anything in the Scope to secure your micro application. But if you plan on using the API calls, feel free to choose the required areas now. If you only want to leverage built-in SSJS and AMPScript functions, keep them unchecked."),(0,o.kt)("p",null,"Once you save the Component, you will see that your Installed Package API Component now lists: ",(0,o.kt)("inlineCode",{parentName:"p"},"Client Id"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Client Secret"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"API Base URI"),". Copy those, as you will need them in the next step."),(0,o.kt)("admonition",{title:"You Should Know",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"After you create your Installed Package, three base URI's are available - Authentication, REST and SOAP. After the ",(0,o.kt)("inlineCode",{parentName:"p"},"https://"),", all of them have a common alphanumeric string with hyphens unique to your SFMC. I copy only this part to build any endpoint necessary for the application."),(0,o.kt)("p",{parentName:"admonition"},"For example, for ",(0,o.kt)("inlineCode",{parentName:"p"},"https://abcdefghi-jklmnoprst-123456.auth.marketingcloudapis.com/"),", the ",(0,o.kt)("inlineCode",{parentName:"p"},"API Base URI")," is ",(0,o.kt)("inlineCode",{parentName:"p"},"abcdefghi-jklmnoprst-123456"),".")),(0,o.kt)("h4",{id:"api-authorisation"},"API Authorisation"),(0,o.kt)("p",null,"With the above pre-work completed, you can use SSJS or AMPScript on your Cloud Page to redirect to the ",(0,o.kt)("inlineCode",{parentName:"p"},"v2/authorize")," endpoint of your Authentication Base URI before loading. It will require any visitor to log into your Marketing Cloud to load your micro application. What's even better, it will automatically load it for users already logged in (micro Single Sign-On)."),(0,o.kt)("p",null,"You will need to pass ",(0,o.kt)("inlineCode",{parentName:"p"},"Client Id")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"Cloud Page URL")," (for redirect after successful login) as query parameters to your authorisation redirect. Another necessary thing is Response Type equal to code. Finally, you can pass a State. The value of this parameter will be available after the redirect. It is excellent for recognising whether someone opened your micro application before (no state) or after (available state) logging in."),(0,o.kt)(r.Z,{groupId:"cloudAppCode",defaultValue:"ssjs",values:[{label:"SSJS",value:"ssjs"},{label:"AMPScript",value:"ampscript"}],mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"ssjs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'{7} title="API Authentication Flow"',"{7}":!0,title:'"API',Authentication:!0,'Flow"':!0},"var appURL = 'APP_CLOUD_PAGE_URL';\nvar clientID = 'CLIENT_ID';\nvar clientSecret = 'CLIENT_SECRET';\nvar clientBase = 'API_BASE_URI';\nvar state = GUID();\n\nPlatform.Response.Redirect('https://' + clientBase + '.auth.marketingcloudapis.com/v2/authorize?response_type=code&client_id=' + clientID + '&redirect_uri=' + appURL + '&state=' + state);\n"))),(0,o.kt)(i.Z,{value:"ampscript",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'{9-13} title="API Authentication Flow"',"{9-13}":!0,title:'"API',Authentication:!0,'Flow"':!0},"VAR @clientID, @clientSecret, @clientBase, @appURL, @session, @requestURL\n\nSET @clientID = 'CLIENT_ID'\nSET @clientSecret = 'CLIENT_SECRET'\nSET @clientBase = 'API_BASE_URI'\nSET @appURL = 'APP_CLOUD_PAGE_URL'\nSET @session = GUID()\n\nSET @requestURL = Concat(\n    'https://', @clientBase, '.auth.marketingcloudapis.com/v2/authorize',\n    '?response_type=code&client_id=', @clientID,\n    '&redirect_uri=', @appURL, '&state=', @session)\nRedirect(@requestURL)\n")))),(0,o.kt)("h4",{id:"api-authentication-with-token"},"API Authentication with Token"),(0,o.kt)("p",null,"Once your micro application refreshes after authorisation, you can get the code query string parameter with SSJS or AMPScript function and use it to make a POST API call to Authentication Base URI - this time to ",(0,o.kt)("inlineCode",{parentName:"p"},"v2/token")," endpoint. As the code from the authorisation endpoint is required in the payload, the fact of receiving the token in the response will validate that the visitor is eligible to access the micro application and use it."),(0,o.kt)(r.Z,{groupId:"cloudAppCode",defaultValue:"ssjs",values:[{label:"SSJS",value:"ssjs"},{label:"AMPScript",value:"ampscript"}],mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"ssjs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'{15} title="API Token Authorisation Flow"',"{15}":!0,title:'"API',Token:!0,Authorisation:!0,'Flow"':!0},"var appURL = 'APP_CLOUD_PAGE_URL';\nvar clientID = 'CLIENT_ID';\nvar clientSecret = 'CLIENT_SECRET';\nvar clientBase = 'API_BASE_URI';\n\nvar code = Platform.Request.GetQueryStringParameter('code');\nvar payload = {\n    grant_type: 'authorization_code',\n    code: code,\n    client_id: clientID,\n    client_secret: clientSecret,\n    redirect_uri: appURL\n};\n\nvar response = HTTP.Post('https://' + clientBase + '.auth.marketingcloudapis.com/v2/token', 'application/json', Stringify(payload));\n\nif (response.StatusCode == 200) {\n    var parsedResponse = Platform.Function.ParseJSON(response.Response[0]);\n    var accessToken = parsedResponse.access_token;\n    var tokenExpire = Platform.Function.SystemDateToLocalDate(Platform.Function.Now());\n    tokenExpire.setMinutes(tokenExpire.getMinutes() + 18);\n};\n\n")),(0,o.kt)("admonition",{title:"You Should Know",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"If you want to use the token for API in the context of a specific Business Unit, add ",(0,o.kt)("inlineCode",{parentName:"p"},"account_id: businessUnitMID,")," to the ",(0,o.kt)("inlineCode",{parentName:"p"},"payload")," to get the right token. Otherwise you will get autorization errors on API calls."))),(0,o.kt)(i.Z,{value:"ampscript",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'{19} title="API Token Authorisation Flow"',"{19}":!0,title:'"API',Token:!0,Authorisation:!0,'Flow"':!0},"VAR @clientID, @clientSecret, @clientBase, @appURL, @code, @requestURL, @token, @APIStatus, @response\n\nSET @clientID = 'CLIENT_ID';\nSET @clientSecret = 'CLIENT_SECRET';\nSET @clientBase = 'API_BASE_URI';\nSET @appURL = 'APP_CLOUD_PAGE_URL';\nSET @code = RequestParameter('code');\n\nSET @requestURL = Concat('https://', @clientBase, '.auth.marketingcloudapis.com/v2/token');\n\nSET @payload = Concat(\n    '{\"grant_type\": \"authorization_code\", ',\n    '\"code\": \"', @code, '\",',\n    '\"client_id\": \"', @clientID, '\",',\n    '\"client_secret\": \"', @clientSecret, '\",',\n    '\"redirect_uri\": \"', @appURL, '\"}'\n)\n\nHTTPPost2(@requestURL, 'application/json', @payload, false, @APIStatus, @response)\nSET @token = Substring(@APIStatus, 18, 512)\n")),(0,o.kt)("admonition",{title:"You Should Know",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"If you want to use the token for API in the context of a specific Business Unit, add ",(0,o.kt)("inlineCode",{parentName:"p"},"'\"account_id\": \"', @businessUnitMID, '\",',")," to the ",(0,o.kt)("inlineCode",{parentName:"p"},"@payload")," to get the right token. Otherwise you will get autorization errors on API calls.")))),(0,o.kt)("p",null,"This way, you just added a micro Single Sign-On feature that is as secure as your Marketing Cloud. And that's not all! As now only your Marketing Cloud users can access the application, you can leverage the Installed Package Access tab to control who will see your solution in the main menu."),(0,o.kt)("p",null,"Now you have a secure, SSO-enabled micro application deeply integrated with Marketing Cloud ready to solve your business needs and power up your Marketing Team."),(0,o.kt)("admonition",{title:"You Should Know",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Adding this micro SSO process blocks Web Studio from loading the Cloud Page in Preview. During development, you either have to comment out the SSO or validate the changes only by publishing and checking in the Cloud Page App directly."),(0,o.kt)("p",{parentName:"admonition"},"It also increases the cost of using the micro application from 1 Super Message per use to 2, due to Cloud Page refresh during authorization.")),(0,o.kt)("h4",{id:"capture-your-cloud-page-app-usage"},"Capture your Cloud Page App usage"),(0,o.kt)("p",null,"We can also add a logging solution that will store session and log app use history. We will need a Data Extension (one can serve multiple Cloud Page Apps) and a bit more code around the above snippets."),(0,o.kt)("p",null,"Create Data Extension with the following structure (",(0,o.kt)("inlineCode",{parentName:"p"},"session")," column being the Primary Key):"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Name"),(0,o.kt)("th",{parentName:"tr",align:null},"DataType"),(0,o.kt)("th",{parentName:"tr",align:null},"Default Value"),(0,o.kt)("th",{parentName:"tr",align:null},"Length"),(0,o.kt)("th",{parentName:"tr",align:null},"Nullable"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"\ud83d\udd11 session"),(0,o.kt)("td",{parentName:"tr",align:null},"Text"),(0,o.kt)("td",{parentName:"tr",align:null}),(0,o.kt)("td",{parentName:"tr",align:null},"50"),(0,o.kt)("td",{parentName:"tr",align:null},"No")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"appName"),(0,o.kt)("td",{parentName:"tr",align:null},"Text"),(0,o.kt)("td",{parentName:"tr",align:null}),(0,o.kt)("td",{parentName:"tr",align:null},"100"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"createdDate"),(0,o.kt)("td",{parentName:"tr",align:null},"Date"),(0,o.kt)("td",{parentName:"tr",align:null},"Current date"),(0,o.kt)("td",{parentName:"tr",align:null}),(0,o.kt)("td",{parentName:"tr",align:null},"Yes")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"token"),(0,o.kt)("td",{parentName:"tr",align:null},"Text"),(0,o.kt)("td",{parentName:"tr",align:null}),(0,o.kt)("td",{parentName:"tr",align:null},"520"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"tokenExpire"),(0,o.kt)("td",{parentName:"tr",align:null},"Date"),(0,o.kt)("td",{parentName:"tr",align:null}),(0,o.kt)("td",{parentName:"tr",align:null}),(0,o.kt)("td",{parentName:"tr",align:null},"Yes")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"userName"),(0,o.kt)("td",{parentName:"tr",align:null},"Text"),(0,o.kt)("td",{parentName:"tr",align:null}),(0,o.kt)("td",{parentName:"tr",align:null},"100"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"userEmail"),(0,o.kt)("td",{parentName:"tr",align:null},"Text"),(0,o.kt)("td",{parentName:"tr",align:null}),(0,o.kt)("td",{parentName:"tr",align:null},"254"),(0,o.kt)("td",{parentName:"tr",align:null},"Yes")))),(0,o.kt)("p",null,"As for data retention, one day for Individual Records is enough for authorisation purposes. However, you can extend it for logging history purposes. Keep in mind that the more data stored, the slower the Data Extension operations speeds. Pushing data to this table is straightforward:"),(0,o.kt)(r.Z,{groupId:"cloudAppCode",defaultValue:"ssjs",values:[{label:"SSJS",value:"ssjs"},{label:"AMPScript",value:"ampscript"}],mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"ssjs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Fill Cloud Page App Logging Data Extension"',title:'"Fill',Cloud:!0,Page:!0,App:!0,Logging:!0,Data:!0,'Extension"':!0},"Platform.Function.UpsertData(authDE, ['session'], [state], ['appName', 'token', 'tokenExpire'], [appName, accessToken, tokenExpire]);\n"))),(0,o.kt)(i.Z,{value:"ampscript",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Fill Cloud Page App Logging Data Extension"',title:'"Fill',Cloud:!0,Page:!0,App:!0,Logging:!0,Data:!0,'Extension"':!0},"UpsertData(@authDE, 1, 'session', @state, 'appName', @appName, 'token', @token, 'tokenExpire', DateAdd(Now(), 18, 'MI'))\n")))),(0,o.kt)("p",null,"It will additionally allow you to safely split your application into the front end (Cloud Page) and back end (Code Resource) to improve user experience and optimise speed and cost."),(0,o.kt)("h3",{id:"secured-cloud-page-app-template"},"Secured Cloud Page App Template"),(0,o.kt)("p",null,"By considering all the above, we get a robust and secure template for our Cloud Page Apps:"),(0,o.kt)(r.Z,{groupId:"cloudAppCode",defaultValue:"ssjs",values:[{label:"SSJS",value:"ssjs"},{label:"AMPScript",value:"ampscript"}],mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"ssjs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Full Cloud Page App Template"',title:'"Full',Cloud:!0,Page:!0,App:!0,'Template"':!0},"<script runat=\"server\">\n    /* -------------------------------------------------------------------------\n\n    Authenticates each visitor to limit access only to SFMC logged-in users.\n\n    1. Global Variables\n    2. Helper Functions\n    2.1. Debugging\n    2.2. Error handling\n    3. Authentication Flow\n    3.1. Authorisation\n    3.2. Authentication with REST Token\n    3.2.1. Build token request payload\n    3.2.2. Request the token\n    3.2.3. Destructure the response\n    3.2.4. Get User Details\n    3.2.5. Upsert Logging Data Extension\n    3.2.6. Handle authentication error\n    3.3. Authorisation Error\n\n    -------------------------------------------------------------------------- */\n\n    Platform.Load('core', '1');\n\n    /* ----------------------------------------------------------------------- */\n    /* ---------------------- 1. GLOBAL VARIABLES ---------------------------- */\n    /* ----------------------------------------------------------------------- */\n\n    var debugging = false;\n    var appName = 'CLOUD_APP_NAME';\n    var appURL = 'APP_CLOUD_PAGE_URL';\n\n    var clientID = 'CLIENT_ID';\n    var clientSecret = 'CLIENT_SECRET';\n    var clientBase = 'API_BASE_URI';\n    var authDE = 'AUTHENTICATION_DATA_EXTENSION';\n\n    var state = Platform.Request.GetQueryStringParameter('state');\n\n    var errorMessage = Platform.Request.GetQueryStringParameter('error');\n    var errorDescription = Platform.Request.GetQueryStringParameter('error_description');\n    var errorDE = 'ERROR_DATA_EXTENSION';\n    var errorURL = 'ERROR_CLOUD_PAGE_URL';\n\n    /* ----------------------------------------------------------------------- */\n    /* ---------------------- 2. HELPER FUNCTIONS ---------------------------- */\n    /* ----------------------------------------------------------------------- */\n\n    /* ---------------------- 2.1. Debugging --------------------------------- */\n\n    /**\n    * @function debugValue\n    * @description Outputs provided description and SSJS value to front-end in a type-safe & consistent way\n    * @param {string} description - Describes meaning of the second parameter in the output\n    * @param {*} value - The value that needs to be debugged\n    */\n    function debugValue(description, value) {\n        Write(description + ': ' + (typeof value == 'object' ? Stringify(value) : value) + '<br><br>');\n    };\n\n    /* ---------------------- 2.2. Error handling ---------------------------- */\n\n    /**\n    * @function handleError\n    * @description Adds the error with context to error logging Data Extension and redirects to error page.\n    * @param {Object} error - The caught error object. Can come from the try/catch block or be manually created.\n    * @param {string} error.message - First error key stores short error message describing the issue.\n    * @param {string} error.description - Second error key stores detailed error path helping with root cause analysis\n    */\n    function handleError(error) {\n        if (debugging) {\n            debugValue('Found error', error);\n        } else {\n            // Remember that if your Logging Data Extension is in Shared Folder, you need to add the \"ENT.\" prefix to name\n            Platform.Function.InsertData(errorDE, ['id', 'appName', 'errorMessage', 'errorDescription'], [GUID(), appName, error.message, error.description]);\n            Platform.Response.Redirect(errorURL + '?error=' + error.message + '&error_description=' + error.description);\n        };\n    };\n\n    /* ----------------------------------------------------------------------- */\n    /* ---------------------- 3. AUTHENTICATION FLOW ------------------------- */\n    /* ----------------------------------------------------------------------- */\n\n    /* ---------------------- 3.1. Authorization ----------------------------- */\n\n    if (!state && !errorMessage) {\n        state = GUID();\n        Platform.Response.Redirect('https://' + clientBase + '.auth.marketingcloudapis.com/v2/authorize?response_type=code&client_id=' + clientID + '&redirect_uri=' + appURL + '&state=' + state);\n\n    /* ---------------------- 3.2. Authentication ---------------------------- */\n\n    } else if (state) {\n        /* 3.2.1. Build token request payload */\n        var code = Platform.Request.GetQueryStringParameter('code');\n        var payload = {\n            grant_type: 'authorization_code',\n            code: code,\n            client_id: clientID,\n            client_secret: clientSecret,\n            redirect_uri: appURL\n        };\n        /* 3.2.2. Request the token */\n        var response = HTTP.Post('https://' + clientBase + '.auth.marketingcloudapis.com/v2/token', 'application/json', Stringify(payload));\n        /* 3.2.3. Destructure the response */\n        if (response.StatusCode == 200) {\n            var parsedResponse = Platform.Function.ParseJSON(response.Response[0]);\n            var accessToken = parsedResponse.access_token;\n            var appScope = parsedResponse.scope;\n            var tokenExpire = Platform.Function.SystemDateToLocalDate(Platform.Function.Now());\n            tokenExpire.setMinutes(tokenExpire.getMinutes() + 18);\n\n            /* 3.2.4. Get User Details */\n            response = HTTP.Get('https://' + clientBase + '.auth.marketingcloudapis.com/v2/userinfo', ['Authorization'], ['Bearer ' + accessToken]);\n            if (debugging) debugValue('UserInfo Response', response)\n            userName = Platform.Function.ParseJSON(response.Content).user.name;\n            userEmail = Platform.Function.ParseJSON(response.Content).user.email;\n\n            /* 3.2.5. Upsert Authentication Logging Data Extension */\n            Platform.Function.UpsertData(authDE, ['session'], [state],\n                ['appName', 'token', 'tokenExpire', 'userName', 'userEmail'],\n                [appName, accessToken, tokenExpire, userName, userEmail]\n            );\n\n        /* 3.2.6. Handle authentication error */\n        } else {\n            handleError({message: 'Authentication Failed', description: 'Status: ' + response.StatusCode})\n        };\n\n    /* ---------------------- 3.3. Authorization Error ----------------------- */\n\n    } else {\n        handleError({message: errorMessage, description: errorDescription});\n    };\n<\/script>\n\n\x3c!-- The Cloud Page App micro SSO solution will secure anything you create below --\x3e\n")),(0,o.kt)("admonition",{title:"You Should Know",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Any reload done within the app (Reload/Redirect/Post via Form) should point back to Apps Cloud Page URL with ",(0,o.kt)("inlineCode",{parentName:"p"},"'state=' + state")," appended to it as a query parameter (remember to use ",(0,o.kt)("inlineCode",{parentName:"p"},"?")," if it will be the first parameter or ",(0,o.kt)("inlineCode",{parentName:"p"},"&")," in another case)."),(0,o.kt)("p",{parentName:"admonition"},"You can also leverage the session to lookup the token for API calls: ",(0,o.kt)("inlineCode",{parentName:"p"},"Platform.Function.Lookup(authDE, 'token', 'session', state)")))),(0,o.kt)(i.Z,{value:"ampscript",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Full Cloud Page App Template"',title:'"Full',Cloud:!0,Page:!0,App:!0,'Template"':!0},"\x3c!-- Authorisation START --\x3e\n%%[\n    /* -------------------------------------------------------------------------\n\n    Authenticates each visitor to limit access only to SFMC logged-in users.\n\n    1. Global Variables - should be updated for each implementation\n    2. Authentication Flow\n    2.1. Session Validation\n    2.2. Authorisation\n    2.3. Authentication with REST Token\n    2.3.1. Build token request payload\n    2.3.2. Get the token\n    2.3.3. Upsert Logging Data Extension\n\n    -------------------------------------------------------------------------- */\n\n    /* ----------------------------------------------------------------------- */\n    /* ------------------------- 1. GLOBAL VARIABLES ------------------------- */\n    /* ----------------------------------------------------------------------- */\n\n    VAR @appName, @clientID, @clientSecret, @clientBase, @appURL, @errorURL, @requestURL, @payload, @APIStatus, @response, @token, @session, @code, @authDE\n\n    /* Add clientID, Client Secret, Client Base (part of API Base URL) for all further calls*/\n    SET @clientID = 'CLIENT_ID'\n    SET @clientSecret = 'CLIENT_SECRET'\n    SET @clientBase = 'API_BASE_URI'\n\n    /* App Nane and relevant URLs */\n    SET @appName = 'CLOUD_APP_NAME'\n    SET @appURL = 'APP_CLOUD_PAGE_URL'\n    SET @errorURL = 'ERROR_CLOUD_PAGE_URL'\n\n    /* Data Extension for Authorisation Logging */\n    SET @authDE = 'AUTHENTICATION_DATA_EXTENSION'\n\n    /* Capture State and Session for Authorisation purposes */\n    SET @state = RequestParameter('state')\n    SET @session = RequestParameter('s')\n\n    /* ----------------------------------------------------------------------- */\n    /* ------------------------- 2. AUTHENTICATION FLOW ---------------------- */\n    /* ----------------------------------------------------------------------- */\n\n    /* ---------------------- 2.1. Session Validation ------------------------ */\n\n    /* If there is Session parameter, validate it with logging DE*/\n    IF NOT Empty(@session) THEN\n        /* If user was authenticated for another app or if he is not authenticated, redirect to login page */\n        IF Lookup(@authDE, 'appName', 'session', @session) != @appName THEN\n            Redirect(@appURL)\n        ENDIF\n        /* Authenticated users jumps to main code */\n\n    /* ------------------------- 2.2. Authorization -------------------------- */\n\n    /* If there is no Session parameter, start Authorisation flow */\n    ELSEIF Empty(@state) AND Empty(@session) THEN\n        SET @session = GUID()\n        SET @requestURL = Concat(\n            'https://', @clientBase, '.auth.marketingcloudapis.com/v2/authorize',\n            '?response_type=code&client_id=', @clientID,\n            '&redirect_uri=', @appURL, '&state=', @session)\n        Redirect(@requestURL)\n\n    /* ------------------------- 2.3. Authentication ------------------------- */\n\n    /* If there is state parameter after Authorisation, get the REST Token */\n    ELSEIF NOT Empty(@state) THEN\n        SET @code = RequestParameter('code')\n        SET @requestURL = Concat('https://', @clientBase, '.auth.marketingcloudapis.com/v2/token')\n\n        /* 2.3.1. Build token request payload */\n        SET @payload = Concat(\n            '{\"grant_type\": \"authorization_code\",',\n            '\"code\": \"' ,@code, '\",',\n            '\"client_id\": \"', @clientID, '\",',\n            '\"client_secret\": \"', @clientSecret, '\",',\n            '\"redirect_uri\": \"', @appURL, '\"}'\n        )\n\n        /* 2.3.2. Get the token */\n        HTTPPost2(@requestURL, 'application/json', @payload, false, @APIStatus, @response)\n        SET @token = Substring(@APIStatus, 18, 512)\n        /* Token expires after an 18 minutes */\n\n        /* 2.3.2. Upsert Logging Data Extension */\n        /* Add record to Logging DE to store the token and validate access with it */\n        UpsertData(@authDE,1, 'session' ,@state, 'appName', @appName, 'token', @token, 'tokenExpire', DateAdd(Now(), 18, 'MI'))\n        Redirect(Concat(@appURL, '?s=', @state))\n\n    /* For any other scenario, redirect to Error Page  */\n    ELSE\n        Redirect(@errorURL)\n\n    ENDIF\n    /* Remember to pass ?s=%%=v(@session)=%% on each page reload for leverage session validation */\n]%%\n\x3c!-- Authorisation END --\x3e\n\n\x3c!-- The Cloud Page App micro SSO solution will secure anything you create below --\x3e\n")),(0,o.kt)("admonition",{title:"You Should Know",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Any reload done within the app (Reload/Redirect/Post via Form) should point back to Apps Cloud Page URL with ",(0,o.kt)("inlineCode",{parentName:"p"},"s=%%=v(@session)=%%")," appended to it as a query parameter (remember to use ",(0,o.kt)("inlineCode",{parentName:"p"},"?")," if it will be the first parameter or ",(0,o.kt)("inlineCode",{parentName:"p"},"&")," in another case)."),(0,o.kt)("p",{parentName:"admonition"},"You can also leverage the session to lookup the token for API calls: ",(0,o.kt)("inlineCode",{parentName:"p"},"%%=Lookup(@authDE,'token','session',@session)=%%"))))),(0,o.kt)("p",null,"To implement it, copy and paste the above code to the top of the Cloud Page used for the App. Next, change the values at the top of the code (the uppercase ones) to match your package installation and app details. That's all!"),(0,o.kt)("h2",{id:"implementation-sum-up"},"Implementation Sum Up"),(0,o.kt)("p",null,"There was much information to digest, so it's time for a streamlined step by step guide from zero to hero:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Logging Data Extensions"),(0,o.kt)("ol",{parentName:"li"},(0,o.kt)("li",{parentName:"ol"},"In Content Builder or Email Studio create a ",(0,o.kt)("a",{parentName:"li",href:"#capture-your-cloud-app-usage"},"Cloud Page App Logging Data Extension"),"."),(0,o.kt)("li",{parentName:"ol"},"In Content Builder or Email Studio create an ",(0,o.kt)("a",{parentName:"li",href:"/docs/ssjs/debugging-ssjs#logging-to-data-extension"},"Error Logging Data Extension"),"."),(0,o.kt)("li",{parentName:"ol"},"In both cases, one is enough for multiple Cloud Page Apps. If stored in the Shared Data Extensions folder, both can serve multiple Business Units."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Cloud Page"),(0,o.kt)("ol",{parentName:"li"},(0,o.kt)("li",{parentName:"ol"},"Create a new Cloud Page."),(0,o.kt)("li",{parentName:"ol"},"Copy the URL."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Installed Package"),(0,o.kt)("ol",{parentName:"li"},(0,o.kt)("li",{parentName:"ol"},"Go to System -> Platform Tools -> Apps -> Installed Packages."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("inlineCode",{parentName:"li"},"New")," in the top right corner."),(0,o.kt)("li",{parentName:"ol"},"Add Unique Name and Description suggesting the App's purpose."),(0,o.kt)("li",{parentName:"ol"},"Marketing Cloud App Component.",(0,o.kt)("ol",{parentName:"li"},(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("inlineCode",{parentName:"li"},"Add Component")," at the bottom."),(0,o.kt)("li",{parentName:"ol"},"Select ",(0,o.kt)("inlineCode",{parentName:"li"},"Marketing Cloud App")," and click Next."),(0,o.kt)("li",{parentName:"ol"},"Add Unique Name and Description suggesting the App's purpose."),(0,o.kt)("li",{parentName:"ol"},"Add Cloud Page URL copied in step 2.ii as both Login and Logout Endpoint."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("inlineCode",{parentName:"li"},"Save"),"."))),(0,o.kt)("li",{parentName:"ol"},"API Integration Component.",(0,o.kt)("ol",{parentName:"li"},(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("inlineCode",{parentName:"li"},"Add Component")," on the right side of the page."),(0,o.kt)("li",{parentName:"ol"},"Select ",(0,o.kt)("inlineCode",{parentName:"li"},"API Integration")," and click Next."),(0,o.kt)("li",{parentName:"ol"},"Select ",(0,o.kt)("inlineCode",{parentName:"li"},"Web App")," and click Next."),(0,o.kt)("li",{parentName:"ol"},"Add Cloud Page URL copied in step 2.ii as Redirect URI."),(0,o.kt)("li",{parentName:"ol"},"Add Scope of the App (should be minimal, can be extended later) and click ",(0,o.kt)("inlineCode",{parentName:"li"},"Save"),"."))),(0,o.kt)("li",{parentName:"ol"},"Copy ",(0,o.kt)("inlineCode",{parentName:"li"},"Client Id"),", ",(0,o.kt)("inlineCode",{parentName:"li"},"Client Secret")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"Client Base URI"),"."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Menu Unlock"),(0,o.kt)("ol",{parentName:"li"},(0,o.kt)("li",{parentName:"ol"},"Refresh tab with Marketing Cloud."),(0,o.kt)("li",{parentName:"ol"},"On the main menu pane of Marketing Cloud, hover over AppExchange to see your application."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Secured Template"),(0,o.kt)("ol",{parentName:"li"},(0,o.kt)("li",{parentName:"ol"},"Copy the ",(0,o.kt)("a",{parentName:"li",href:"#secured-cloud-app-template"},"template")," in the prefered language to the Cloud Page from step 2.i."),(0,o.kt)("li",{parentName:"ol"},"Update the unique values in the variables at the top part of the template (CAPS_LOCK placeholders)."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Build your solution"))))}g.isMDXComponent=!0}}]);