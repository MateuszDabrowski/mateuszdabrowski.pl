<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Mateusz DÄ…browski Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Mateusz DÄ…browski Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-N46LB5K"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-N46LB5K",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Mateusz DÄ…browski" href="/opensearch.xml"><title data-react-helmet="true">MobileConnect Phone Change | Mateusz DÄ…browski</title><meta data-react-helmet="true" property="og:image" content="https://mateuszdabrowski.pl/img/logotyp-og.png"><meta data-react-helmet="true" name="twitter:image" content="https://mateuszdabrowski.pl/img/logotyp-og.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Mateusz DÄ…browski"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="MobileConnect Phone Change | Mateusz DÄ…browski"><meta data-react-helmet="true" name="description" content="Control your MobileConnect data with hidden _MobileAddress features."><meta data-react-helmet="true" property="og:description" content="Control your MobileConnect data with hidden _MobileAddress features."><meta data-react-helmet="true" property="og:url" content="https://mateuszdabrowski.pl/docs/ssjs/ssjs-snippet-mobileconnect-phone-change"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://mateuszdabrowski.pl/docs/ssjs/ssjs-snippet-mobileconnect-phone-change"><link rel="stylesheet" href="/styles.ad8340a8.css">
<link rel="preload" href="/styles.de096e48.js" as="script">
<link rel="preload" href="/runtime~main.f4b05df4.js" as="script">
<link rel="preload" href="/main.99e2c9f5.js" as="script">
<link rel="preload" href="/1.f62f9e1d.js" as="script">
<link rel="preload" href="/39.a947aa72.js" as="script">
<link rel="preload" href="/42.df93985c.js" as="script">
<link rel="preload" href="/935f2afb.4f242ab3.js" as="script">
<link rel="preload" href="/38.f8873302.js" as="script">
<link rel="preload" href="/86af67ea.de019f5b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo-horizontal-light-2x.png" alt="Mateusz DÄ…browski Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo-horizontal-dark-2x.png" alt="Mateusz DÄ…browski Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Home</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs &amp; Snippets</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/ssjs/ssjs-if-and-switch">SSJS</a></li><li><a class="dropdown__link" href="/docs/js/js-if-and-switch">JavaScript</a></li><li><a class="dropdown__link" href="/docs/sql/sfmc-sql-basics">SFMC SQL</a></li><li><a class="dropdown__link" href="/docs/config/sfmc-config-permissions">SFMC Config</a></li></ul></div><a class="navbar__item navbar__link" href="/ideas">Ideas</a><a class="navbar__item navbar__link" href="/sites/my-toolset">Toolset</a></div><div class="navbar__items navbar__items--right"><a href="https://www.linkedin.com/in/mateusz-dabrowski-marketing/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-linkedin-link" aria-label="LinkedIn Profile"></a><a href="https://trailblazer.me/id/madabrowski" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-salesforce-link" aria-label="Trailblazer Profile"></a><a href="https://github.com/MateuszDabrowski" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><div class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></div></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo-horizontal-light-2x.png" alt="Mateusz DÄ…browski Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo-horizontal-dark-2x.png" alt="Mateusz DÄ…browski Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Home</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a aria-current="page" class="menu__link menu__link--sublist navbar__link--active" role="button" href="/docs">Docs &amp; Snippets</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/ssjs/ssjs-if-and-switch">SSJS</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/js/js-if-and-switch">JavaScript</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/sql/sfmc-sql-basics">SFMC SQL</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config/sfmc-config-permissions">SFMC Config</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/ideas">Ideas</a></li><li class="menu__list-item"><a class="menu__link" href="/sites/my-toolset">Toolset</a></li><li class="menu__list-item"><a href="https://www.linkedin.com/in/mateusz-dabrowski-marketing/" target="_blank" rel="noopener noreferrer" class="menu__link header-linkedin-link" aria-label="LinkedIn Profile"></a></li><li class="menu__list-item"><a href="https://trailblazer.me/id/madabrowski" target="_blank" rel="noopener noreferrer" class="menu__link header-salesforce-link" aria-label="Trailblazer Profile"></a></li><li class="menu__list-item"><a href="https://github.com/MateuszDabrowski" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Docs &amp; Snippets</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">SSJS</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ssjs/ssjs-if-and-switch">If &amp; Switch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ssjs/ssjs-loops">Loops</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ssjs/debugging-ssjs">Debugging &amp; Error Handling</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">SSJS Use Cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/usecase/engage-with-countdown">Engage with Countdown</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/usecase/tailor-with-data">Tailor with Data</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">SSJS Snippets</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/ssjs/ssjs-snippet-mobileconnect-phone-change">MobileConnect Phone Change</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">JavaScript</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/js/js-if-and-switch">If &amp; Switch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/js/js-loops">Loops</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">JS Use Cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/usecase/engage-with-countdown">Engage with Countdown</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/usecase/tailor-with-data">Tailor with Data</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">SFMC SQL</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sql/sfmc-sql-basics">SQL Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sql/sfmc-sql-select">Select</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sql/sfmc-sql-from">From</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sql/sfmc-sql-join">Join</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sql/sfmc-sql-where">Where</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sql/sfmc-sql-like">Like</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sql/sfmc-sql-string-functions">String Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sql/sfmc-sql-date-functions">Date Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sql/sfmc-sql-numeric-functions">Numeric Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sql/sfmc-sql-conversion-functions">Conversion Functions</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">SQL Snippets</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sql/sfmc-sql-snippet-debugging-email-sends">Debugging Email Sends</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sql/sfmc-sql-snippet-debugging-value-length">Debugging Value Length</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">SFMC Config</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config/sfmc-config-permissions">Permissions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config/sfmc-config-system-data-views">System Data Views</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config/sfmc-config-features-on-demand">Features On Demand</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config/sfmc-config-behavioral-triggers">Behavioral Triggers</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">MobileConnect Phone Change</h1></header><div class="markdown"><p id="leadText_rx-B">Control your MobileConnect data with hidden _MobileAddress features.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="problem-with-changing-mobileconnect-mobile-number"></a>Problem with changing MobileConnect Mobile Number<a class="hash-link" href="#problem-with-changing-mobileconnect-mobile-number" title="Direct link to heading">#</a></h2><p>There is a lot to like about the Salesforce Marketing Cloud Mobile Connect, but Contact management is not the one.</p><p>One of the problems is managing the Mobile Phone Number. It is a crucial data point because we are using it to send the SMS and because it is the key value for many of the <a href="/docs/config/sfmc-config-system-data-views#mobileconnect-data-views">MobileConnect Data Views</a>.</p><p>There are many scenarios when we might want to update the user&#x27;s Mobile Number. Be it wrong data in the initial load or client&#x27;s request to change the number.</p><p>The official approach is to import the contact with the new Mobile Number. It, however, won&#x27;t overwrite the previous phone. It will merely add a new one to the record with higher <a href="/docs/config/sfmc-config-system-data-views#_mobileaddress">priority</a>. Not perfect.</p><p>So what you can do? Leverage the <a href="/docs/config/sfmc-config-system-data-views#_mobileaddress"><code>_MobileAddress</code> Data View</a> along with simple SSJS snippet and force Marketing Cloud to do what you want it to do.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>You Should Know</h5></div><div class="admonition-content"><p>The solution shown below is working perfectly fine right now. However, remember that Salesforce considers <a href="/docs/config/sfmc-config-system-data-views#_mobileaddress"><code>_MobileAddress</code> Data View</a> as legacy and unsupported, so be sure to make the first run on test data to check whether it is still working correctly.</p><p>Considering how intertwined this Data View still is with MobileConnect, I don&#x27;t expect changes anytime soon.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="solution"></a>Solution<a class="hash-link" href="#solution" title="Direct link to heading">#</a></h2><p><a href="/docs/config/sfmc-config-system-data-views#_mobileaddress"><code>_MobileAddress</code> Data View</a> is unique, as it can be modified using SSJS - this is not the case with most other Data Views. We can make use of this by using <a href="https://developer.salesforce.com/docs/atlas.en-us.noversion.mc-programmatic-content.meta/mc-programmatic-content/ssjs_dataExtensionRowsUpdate.htm" target="_blank" rel="noopener noreferrer"><code>Rows.Update</code></a> function.</p><p>We will need:</p><ul><li>Contact ID - you can check it by going to MobileConnect Â» Manage Contacts Â» clicking a Contact Key Â» Attributes tab. It will be in the first table.</li><li>New Mobile Number - must be in the MobileConnect format with the dialling code prefix (without the <code>+</code> or <code>00</code>). For example, Poland has +48 dialling code and nine-digit numbers, so the correct form is 48123456789.</li></ul><p>With that two information, <a href="https://developer.salesforce.com/docs/atlas.en-us.noversion.mc-programmatic-content.meta/mc-programmatic-content/ssjs_dataExtensionFunctions.htm" target="_blank" rel="noopener noreferrer"><code>Init</code></a> the Data View and update it. Remember to load the Core Library.</p><div class="mdxCodeBlock_1zKU"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_2eSY">Change Mobile Number of a single Contact</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-html codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">runat</span><span class="token tag attr-value punctuation" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">server</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript maybe-class-name">Platform</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access maybe-class-name" style="color:#d73a49">Load</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;Core&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">,</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;1&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript keyword" style="color:#00009f">var</span><span class="token script language-javascript"> contactId </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript number" style="color:#36acaa">123456789</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript keyword" style="color:#00009f">var</span><span class="token script language-javascript"> mobileAddressDataView </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript maybe-class-name">DataExtension</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access maybe-class-name" style="color:#d73a49">Init</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;_MobileAddress&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript keyword" style="color:#00009f">var</span><span class="token script language-javascript"> result </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> mobileAddressDataView</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript property-access maybe-class-name">Rows</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access maybe-class-name" style="color:#d73a49">Update</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript">_MobileNumber</span><span class="token script language-javascript punctuation" style="color:#393A34">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:#e3116c">&#x27;48123456789&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript punctuation" style="color:#393A34">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">[</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;_ContactID&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">]</span><span class="token script language-javascript punctuation" style="color:#393A34">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">[</span><span class="token script language-javascript">contactId</span><span class="token script language-javascript punctuation" style="color:#393A34">]</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>That&#x27;s it. Running this snippet - even in a Cloud Page or Code Resource - will change the Mobile Number assigned to the Contact.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>You Should Know</h5></div><div class="admonition-content"><p>If the new Mobile Number has different dialling code, be sure to also update <code>_CountryCode</code> field with appropriate two-letter code (for example, <code>PL</code>)</p><p>You can do it in one line:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">mobileAddressDataView</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Rows</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">Update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">_MobileNumber</span><span class="token punctuation" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&#x27;48123456789&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">_CountryCode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&#x27;PL&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;_ContactID&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">contactId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="options"></a>Options<a class="hash-link" href="#options" title="Direct link to heading">#</a></h2><p>You can adapt the above script to better suit your needs.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="change-or-merge-contact-id"></a>Change or Merge Contact ID<a class="hash-link" href="#change-or-merge-contact-id" title="Direct link to heading">#</a></h3><p>You are not limited to Mobile Number change in MobileConnect with this solution. You can leverage <a href="/docs/config/sfmc-config-system-data-views#_mobileaddress"><code>_MobileAddress</code> Data View</a> to even merge MobileConnect contacts.</p><p>Use cases?</p><ul><li>You might have two contacts with different phone numbers that you have identified to be the same person (one tied to personal and second to work number). To optimize the contact count, you can make a merge.</li><li>Your client opted-in for Keyword using SMS. It created a Contact with the phone number as Contact Key. Later your CRM pushed this contact to Marketing Cloud with proper Contact Key. Merge it to have the engagement data adequately allocated.</li></ul><p>To do this, you search by Contact ID of the to-be-merged record and update it to the one you want to use after the merge.</p><div class="mdxCodeBlock_1zKU"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_2eSY">Change Contact ID of a single Contact</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-html codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">runat</span><span class="token tag attr-value punctuation" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">server</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript maybe-class-name">Platform</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access maybe-class-name" style="color:#d73a49">Load</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;Core&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">,</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;1&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript keyword" style="color:#00009f">var</span><span class="token script language-javascript"> contactId </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript number" style="color:#36acaa">123456789</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript keyword" style="color:#00009f">var</span><span class="token script language-javascript"> newContactId </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript number" style="color:#36acaa">987654321</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript keyword" style="color:#00009f">var</span><span class="token script language-javascript"> mobileAddressDataView </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript maybe-class-name">DataExtension</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access maybe-class-name" style="color:#d73a49">Init</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;_MobileAddress&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript keyword" style="color:#00009f">var</span><span class="token script language-javascript"> result </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> mobileAddressDataView</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript property-access maybe-class-name">Rows</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access maybe-class-name" style="color:#d73a49">Update</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript">_ContactID</span><span class="token script language-javascript punctuation" style="color:#393A34">:</span><span class="token script language-javascript"> newContactId</span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript punctuation" style="color:#393A34">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">[</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;_ContactID&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">]</span><span class="token script language-javascript punctuation" style="color:#393A34">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">[</span><span class="token script language-javascript">contactId</span><span class="token script language-javascript punctuation" style="color:#393A34">]</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>You Should Know</h5></div><div class="admonition-content"><p>You cannot merge two Contacts with the same Mobile Number. It is why it is crucial to leverage this snippet before you import new Contacts into MobileConnect.</p><p>You can, however, change the Mobile Number before merging. For example, by adding 0 before the dialling code. The phone won&#x27;t be correct, but you can lower priority. Engagement and Subscription history is assigned to Mobile Number, not specific Contact ID, so as long as the merged record will keep the original number, it will also have its history.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="add-lookup-remove"></a>Add, Lookup, Remove<a class="hash-link" href="#add-lookup-remove" title="Direct link to heading">#</a></h3><p>You are not limited to updating. You can also leverage other SSJS functions to <a href="https://developer.salesforce.com/docs/atlas.en-us.noversion.mc-programmatic-content.meta/mc-programmatic-content/ssjs_dataExtensionRowsAdd.htm" target="_blank" rel="noopener noreferrer">add</a>, <a href="https://developer.salesforce.com/docs/atlas.en-us.noversion.mc-programmatic-content.meta/mc-programmatic-content/ssjs_dataExtensionRowsLookup.htm" target="_blank" rel="noopener noreferrer">lookup</a> or <a href="https://developer.salesforce.com/docs/atlas.en-us.noversion.mc-programmatic-content.meta/mc-programmatic-content/ssjs_dataExtensionRowsRemove.htm" target="_blank" rel="noopener noreferrer">remove</a> MobileConnect Contacts. Those might be great for enhancing your Preference Center or leveraging Automation Studio.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="self-serve-it"></a>Self-serve it<a class="hash-link" href="#self-serve-it" title="Direct link to heading">#</a></h3><p>Above snippets are great for single cases you want to cover, but you might consider using them as a part of your Preference Center and allow your customer to change their phone number themselves.</p><p>Be sure, however, to normalize the number provided manually by the client for it to be numbers only with appropriate dialling code and country code.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="automate-it"></a>Automate it<a class="hash-link" href="#automate-it" title="Direct link to heading">#</a></h3><p>You can also leverage the snippet within an Automation Studio using Data Extension as a batch data source and Script Activity for processing. Pack the snippet within a <a href="/docs/ssjs/ssjs-loops"><code>for</code> loop</a> and make a more significant change to your MobileConnect data.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>You Should Know</h5></div><div class="admonition-content"><p>Technically you can use this solution to modify any field of <a href="/docs/config/sfmc-config-system-data-views#_mobileaddress"><code>_MobileAddress</code></a>. Due to the unsupported status of this Data View, I would recommend using Contact Builder whenever it is enough for your use case. It allows you to change everything but the Mobile Number and Contact ID.</p></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/MateuszDabrowski/mateuszdabrowski.pl/edit/master/docs/ssjs/ssjs-snippet-mobileconnect-phone-change.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-01-25T08:27:09.000Z" class="docLastUpdatedAt_1Qna">1/25/2021</time> by <strong>Mateusz DÄ…browski</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/usecase/tailor-with-data"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Tailor the experience with data logic</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/js/js-if-and-switch"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">JS If &amp; Switch Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#problem-with-changing-mobileconnect-mobile-number" class="table-of-contents__link">Problem with changing MobileConnect Mobile Number</a></li><li><a href="#solution" class="table-of-contents__link">Solution</a></li><li><a href="#options" class="table-of-contents__link">Options</a><ul><li><a href="#change-or-merge-contact-id" class="table-of-contents__link">Change or Merge Contact ID</a></li><li><a href="#add-lookup-remove" class="table-of-contents__link">Add, Lookup, Remove</a></li><li><a href="#self-serve-it" class="table-of-contents__link">Self-serve it</a></li><li><a href="#automate-it" class="table-of-contents__link">Automate it</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs &amp; Snippets</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/ssjs/ssjs-if-and-switch">SSJS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/js/js-if-and-switch">JavaScript</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sql/sfmc-sql-basics">SFMC SQL</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/config/sfmc-config-permissions">SFMC Config</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">About</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/sites/my-toolset">Toolset</a></li><li class="footer__item"><a class="footer__link-item" href="/ideas">Ideas</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/sites/licence">Licence &amp; Attribution</a></li><li class="footer__item"><a class="footer__link-item" href="/sites/privacy">Privacy</a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/styles.de096e48.js"></script>
<script src="/runtime~main.f4b05df4.js"></script>
<script src="/main.99e2c9f5.js"></script>
<script src="/1.f62f9e1d.js"></script>
<script src="/39.a947aa72.js"></script>
<script src="/42.df93985c.js"></script>
<script src="/935f2afb.4f242ab3.js"></script>
<script src="/38.f8873302.js"></script>
<script src="/86af67ea.de019f5b.js"></script>
</body>
</html>