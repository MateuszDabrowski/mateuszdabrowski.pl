<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Mateusz DÄ…browski Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Mateusz DÄ…browski Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-N46LB5K"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-N46LB5K",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Mateusz DÄ…browski" href="/opensearch.xml"><title data-react-helmet="true">SFMC SQL Join | Mateusz DÄ…browski</title><meta data-react-helmet="true" property="og:image" content="https://mateuszdabrowski.pl/img/logotyp-og.png"><meta data-react-helmet="true" name="twitter:image" content="https://mateuszdabrowski.pl/img/logotyp-og.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://mateuszdabrowski.pl/docs/sql/sfmc-sql-join"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="SFMC SQL Join | Mateusz DÄ…browski"><meta data-react-helmet="true" name="description" content="Data Extensions. System Data Views. With the JOIN statement, use one query to rule them all."><meta data-react-helmet="true" property="og:description" content="Data Extensions. System Data Views. With the JOIN statement, use one query to rule them all."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://mateuszdabrowski.pl/docs/sql/sfmc-sql-join"><link data-react-helmet="true" rel="alternate" href="https://mateuszdabrowski.pl/docs/sql/sfmc-sql-join" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://mateuszdabrowski.pl/docs/sql/sfmc-sql-join" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.77c274a4.css">
<link rel="preload" href="/assets/js/styles.be07aeb8.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.4618cae2.js" as="script">
<link rel="preload" href="/assets/js/main.efb4bc36.js" as="script">
<link rel="preload" href="/assets/js/1.18c2bb3c.js" as="script">
<link rel="preload" href="/assets/js/2.4f1ad9e9.js" as="script">
<link rel="preload" href="/assets/js/43.c76fdf0e.js" as="script">
<link rel="preload" href="/assets/js/46.aca6cb3a.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.275a9d6b.js" as="script">
<link rel="preload" href="/assets/js/17896441.5f8edaba.js" as="script">
<link rel="preload" href="/assets/js/5ee690fc.1b328ad5.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo-horizontal-light-2x.png" alt="Mateusz DÄ…browski Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo-horizontal-dark-2x.png" alt="Mateusz DÄ…browski Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Home</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs &amp; Snippets</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/ssjs/ssjs-if-and-switch">SSJS</a></li><li><a class="dropdown__link" href="/docs/js/js-if-and-switch">JavaScript</a></li><li><a class="dropdown__link" href="/docs/sql/sfmc-sql-basics">SFMC SQL</a></li><li><a class="dropdown__link" href="/docs/config/sfmc-config-permissions">SFMC Config</a></li></ul></div><a class="navbar__item navbar__link" href="/ideas">Ideas</a><a class="navbar__item navbar__link" href="/sites/my-toolset">Toolset</a></div><div class="navbar__items navbar__items--right"><a href="https://www.linkedin.com/in/mateusz-dabrowski-marketing/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-linkedin-link" aria-label="LinkedIn Profile"></a><a href="https://trailblazer.me/id/madabrowski" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-salesforce-link" aria-label="Trailblazer Profile"></a><a href="https://github.com/MateuszDabrowski" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo-horizontal-light-2x.png" alt="Mateusz DÄ…browski Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo-horizontal-dark-2x.png" alt="Mateusz DÄ…browski Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Home</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a aria-current="page" class="menu__link menu__link--sublist navbar__link--active" role="button" href="/docs">Docs &amp; Snippets</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/ssjs/ssjs-if-and-switch">SSJS</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/js/js-if-and-switch">JavaScript</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/sql/sfmc-sql-basics">SFMC SQL</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config/sfmc-config-permissions">SFMC Config</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/ideas">Ideas</a></li><li class="menu__list-item"><a class="menu__link" href="/sites/my-toolset">Toolset</a></li><li class="menu__list-item"><a href="https://www.linkedin.com/in/mateusz-dabrowski-marketing/" target="_blank" rel="noopener noreferrer" class="menu__link header-linkedin-link" aria-label="LinkedIn Profile"></a></li><li class="menu__list-item"><a href="https://trailblazer.me/id/madabrowski" target="_blank" rel="noopener noreferrer" class="menu__link header-salesforce-link" aria-label="Trailblazer Profile"></a></li><li class="menu__list-item"><a href="https://github.com/MateuszDabrowski" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Docs &amp; Snippets</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">SSJS</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ssjs/ssjs-if-and-switch">If &amp; Switch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ssjs/ssjs-loops">Loops</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ssjs/debugging-ssjs">Debugging &amp; Error Handling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ssjs/ssjs-vs-ampscript-performance">Performance</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">SSJS Use Cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/usecase/engage-with-countdown">Engage with Countdown</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/usecase/tailor-with-data">Tailor with Data</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">SSJS Snippets</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ssjs/ssjs-snippet-ampscript-in-ssjs">AMPScript in SSJS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ssjs/ssjs-snippet-mobileconnect-phone-change">MobileConnect Phone Change</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">JavaScript</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/js/js-if-and-switch">If &amp; Switch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/js/js-loops">Loops</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">JS Use Cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/usecase/engage-with-countdown">Engage with Countdown</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/usecase/tailor-with-data">Tailor with Data</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">SFMC SQL</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sql/sfmc-sql-basics">SQL Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sql/sfmc-sql-select">Select</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sql/sfmc-sql-from">From</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/sql/sfmc-sql-join">Join</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sql/sfmc-sql-where">Where</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sql/sfmc-sql-like">Like</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sql/sfmc-sql-string-functions">String Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sql/sfmc-sql-date-functions">Date Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sql/sfmc-sql-numeric-functions">Numeric Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sql/sfmc-sql-conversion-functions">Conversion Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sql/sfmc-sql-style-guide">SQL Style Guide</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">SQL Snippets</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sql/sfmc-sql-snippet-debugging-email-sends">Debugging Email Sends</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sql/sfmc-sql-snippet-debugging-value-length">Debugging Value Length</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">SFMC Config</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config/sfmc-config-permissions">Permissions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config/sfmc-config-system-data-views">System Data Views</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config/sfmc-config-features-on-demand">Features On Demand</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config/sfmc-config-behavioral-triggers">Behavioral Triggers</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">SFMC SQL Join</h1></header><div class="markdown"><p id="leadText_16va">Data Extensions. System Data Views. With the JOIN statement, use one query to rule them all.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Table of Contents</h5></div><div class="admonition-content"><div class="tableOfContentsInline_3fWc"><ul class="table-of-contents"><li><a href="#join-types">JOIN Types</a><ul><li><a href="#inner-join">Inner Join</a></li><li><a href="#left-and-right-joins">Left and Right Joins</a></li><li><a href="#full-join">Full Join</a></li><li><a href="#self-join">Self-join</a></li></ul></li><li><a href="#joining-on">Joining ON</a></li><li><a href="#table-name-prefix">Table Name Prefix</a></li><li><a href="#multiple-joins">Multiple Joins</a><ul><li><a href="#multiple-inner-joins">Multiple Inner Joins</a></li><li><a href="#multiple-left-joins">Multiple Left Joins</a></li><li><a href="#multiple-various-joins">Multiple Various Joins</a></li></ul></li><li><a href="#union">UNION</a></li><li><a href="#intersect">INTERSECT</a></li><li><a href="#except">EXCEPT</a></li></ul></div></div></div><p>There will be some cases where all you need is to pull (and maybe transform) data <a href="/docs/sql/sfmc-sql-from"><code>FROM</code></a> a single Data Extension. But the real magic of SQL is visible when you need to combine information from multiple data points. Here comes the <code>JOIN</code> statement.</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">Check who opened the email and when by querying the _Open System Data View</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> o</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EventDate </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> OpenDate</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> WelcomeCampaignSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> wel</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> _Open </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> o</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> o</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>There are three things to unpack.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="join-types"></a>JOIN Types<a class="hash-link" href="#join-types" title="Direct link to heading">#</a></h2><p>In the example above, you can see the <code>JOIN</code> word. There are many <code>JOIN</code> statement types available in SQL. The appropriate joining will allow you to segment your records precisely the way you want and without the need for extensive <a href="/docs/sql/sfmc-sql-where"><code>WHERE</code></a> clauses. Understanding differences between various types and using the correct one for the task at hand will make your code shorter, easier to read and optimised. Let&#x27;s check what is in the quiver:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="inner-join"></a>Inner Join<a class="hash-link" href="#inner-join" title="Direct link to heading">#</a></h3><p>The most straightforward join is <code>INNER JOIN</code>. It takes records from the first table (<code>Welcome-Campaign-Segment</code> Data Extension in the above example) and the second table (<code>_Open</code> System Data View in this case) to output records available in both of them (based on selected relation).</p><p>In our query, it will be contacts that are in the Data Extension and at the same time have some email opens in <code>_Open</code> System Data View. It will ignore all contacts that are not visible in the <code>_Open</code> System Data View, and all the email opens that are not related to contacts in the <code>Welcome-Campaign-Segment</code> Data Extension.</p><p>Of course, this query in its current state is not perfect and could output wrong results (like tracked opens for the contacts from our Data Extension, but coming from the entirely different campaign) as it doesn&#x27;t limit the scope to just one campaign or Job.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> o</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EventDate </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> OpenDate</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> WelcomeCampaignSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> wel</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">INNER</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> _Open </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> o</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> o</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>When using <code>INNER JOIN</code>, you can write just the word <code>JOIN</code>, as in the first example, to have the same result. However, it is best practice to state this type explicitly by writing the full name. It makes it easier to differentiate from the following types of <code>JOIN</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="left-and-right-joins"></a>Left and Right Joins<a class="hash-link" href="#left-and-right-joins" title="Direct link to heading">#</a></h3><p>The following joins are <code>LEFT JOIN</code> (also known as <code>LEFT OUTER JOIN</code>) and <code>RIGHT JOIN</code> (also known as <code>RIGHT OUTER JOIN</code>). Instead of limiting the output to records available in both tables, they take complete data from one table and append the additional information from the second one (if it is available).</p><p><code>LEFT JOIN</code> will take complete data of the first table (in our example, Data Extension selected by <code>FROM</code>) and extend it with information from the second one (<code>_Open</code> System Data View joined with <code>LEFT JOIN</code>).</p><p>You can go the other way around with <code>RIGHT JOIN</code> (in our example, it would output everything in <code>_Open</code> System Data View and append to it the data from the Data Extension - not that useful).</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">The same query, but this time joined with LEFT JOIN</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> o</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EventDate </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> OpenDate</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> WelcomeCampaignSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> wel</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> _Open </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> o</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> o</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>As you can see, the only thing we changed in the above query is the type of <code>JOIN</code>. This simple change will alter our outcomes to show a complete list of all Subscriber Keys and Email Addresses from <code>Welcome-Campaign-Segment</code> Data Extension with the email open date for those contacts who engaged with the communication. Unengaged ones would have <code>null</code> values in the <code>OpenDate</code> column. Again, it is not a proper way of building such a report. There will be the ready-to-use snippet at the bottom.</p><p>Due to the similarity of <code>LEFT JOIN</code> and <code>RIGHT JOIN</code>, I highly recommend choosing one type and use it consistently to lower the risk of an error.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>You Should Know</h5></div><div class="admonition-content"><p>If you would want to see all contacts from our Data Extension that did not open the email, you could use <code>LEFT JOIN</code> with exclusion:</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">Example of exclusion applied to LEFT JOIN</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> o</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EventDate </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> OpenDate</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> WelcomeCampaignSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> wel</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> _Open </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> o</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> o</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">WHERE</span><span class="token plain"> o</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey </span><span class="token operator" style="color:rgb(0, 92, 197)">IS</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(0, 92, 197)">NULL</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Find more about it in the <a href="/docs/sql/sfmc-sql-where">WHERE statement guide</a>.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="full-join"></a>Full Join<a class="hash-link" href="#full-join" title="Direct link to heading">#</a></h3><p>The last classic SQL <code>JOIN</code> is the <code>FULL JOIN</code> (also known as <code>FULL OUTER JOIN</code>) that allows you to get data from both sources.</p><p>In our example, it would mean all contacts from <code>Welcome-Campaign-Segment</code> Data Extension and all records from <code>_Open</code> System Data View, with <code>null</code> values in the columns without a match. Contacts that did not open and tracked opens nor related to contacts available in the Data Extension we selected.</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">Not a best use case for the FULL JOIN</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> o</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EventDate </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> OpenDate</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> WelcomeCampaignSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> wel</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">FULL</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> _Open </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> o</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> o</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><code>FULL JOIN</code> is an excellent tool when you, for example, want to create a master segment from multiple smaller ones. Another use case - checking multiple tracking data points with a clear view which are missing (for example, which users have a tracked email click without open and vice versa).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="self-join"></a>Self-join<a class="hash-link" href="#self-join" title="Direct link to heading">#</a></h3><p>Then there is Self-join. It is not a separate type of <code>JOIN</code> statement but rather a specific use case for the above types. It joins the table to itself. Useful when you have columns in your data extension that point to other columns in the same extension.</p><p>A use case I can think of in the world of Salesforce Marketing Cloud could be, for example, a Data Extension that stores product categories and subcategories.</p><p>Input Data Extension:</p><table><thead><tr><th>CategoryName</th><th>CategoryID</th><th>ParentCategoryID</th></tr></thead><tbody><tr><td>Wristwatches</td><td>1</td><td></td></tr><tr><td>Diver Watches</td><td>2</td><td>1</td></tr><tr><td>Pilot Watches</td><td>3</td><td>1</td></tr></tbody></table><p>In such a scenario, you can use Self-join to build a more readable table that might be useful for personalisation:</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">Self-join using INNER JOIN will output only categories that have a parent category</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      c</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">CategoryName  </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> Category</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> pc</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">CategoryName </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> ParentCategory</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> WristwatchesDE </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> c</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">INNER</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> WristwatchesDE </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> pc</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> pc</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">ParentCategoryID </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">CategoryID</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Output Data Extension:</p><table><thead><tr><th>Category</th><th>ParentCategory</th></tr></thead><tbody><tr><td>Diver Watches</td><td>Wristwatches</td></tr><tr><td>Pilot Watches</td><td>Wristwatches</td></tr></tbody></table><p>Another use case? You might have a product table for your e-commerce wherein one column store recommended products that are often purchased together. To personalise an email with such offers, self-join on that column would be perfect.</p><p>You won&#x27;t be using Self-join a lot, but it might be a colossal timesaver when needed.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>You Should Know</h5></div><div class="admonition-content"><p>Self-join might be the perfect tool for working with data coming from Salesforce through Marketing Cloud Connect to Synchronized Data Extensions.</p><p>Very often, you might encounter Accounts that are related to another Account. This hierarchical structure uses the ParentId field. You can flatten this relationship for use in personalisation and journeys with self-join.</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">Flattening three levels of Salesforce Account hierarchy</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      a1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">Id   </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> Level1AccountId</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> a1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">Name </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> Level1AccountName</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> a2</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">Id   </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> Level2AccountId</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> a2</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">Name </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> Level2AccountName</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> a3</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">Id   </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> Level3AccountId</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> a3</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">Name </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> Level3AccountName</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> Account_Salesforce </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> a1</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> Account_Salesforce </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> a2</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> a2</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">Id </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> a1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">ParentId</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> Account_Salesforce </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> a3</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> a3</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">Id </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> a2</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">ParentId</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="joining-on"></a>Joining ON<a class="hash-link" href="#joining-on" title="Direct link to heading">#</a></h2><p>I was writing a lot about the various <code>JOIN</code> statements, but there is also the <code>ON</code> element. We use it to define the relationship between the joined data sources. It tells the query which value it should consider to decide whether the record is available in both columns.</p><p>In our example, we used <code>ON de.SubscriberKey = o.SubscriberKey</code> that takes the SubscriberKey from the Data Extension and the System Data View and matches the rows based on it. You can use any other but always think about edge cases. Is the email address always unique? It is a very similar experience to what you do in the Salesforce Marketing Cloud Data Designer.</p><p>This column does not have to be the Primary Key of the Data Extension or System Data View. You can select any as long as its values have a match in the second source.</p><p>You can also add a bit of logic to it by leveraging <code>AND</code>/<code>OR</code> statements. It is handy when either:</p><ol><li>You are not sure which column will have a match. For example, you have separate columns for 15 characters Salesforce ID and 18 characters one and want to match on either one.</li><li>You want to match multiple criteria. For example, not only the <code>EmailAddress</code> field but also <code>LastName</code> to cover shared email address.</li><li>You want to join more than two data sources together using convoluted logic. You will find an example soon in the <a href="#multiple-various-joins">Multiple Various Joins</a> section.</li></ol><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>You Should Know</h5></div><div class="admonition-content"><p>You are not limited to the simple <code>ON ColumnA = ColumnB</code>. If needed, you can go for more dynamic joins that leverage SQL functions:</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">Joining on a normalised phone number from Data View and potentially prefixed phone of Data Extension</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> sms</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">OptInStatusID</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> sms</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">OptOutStatusID</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> WelcomeCampaignSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> wel</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> _SMSSubscriptionLog </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> sms</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> sms</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">MobileNumber </span><span class="token operator" style="color:rgb(0, 92, 197)">LIKE</span><span class="token plain"> CONCAT</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&#x27;%&#x27;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">MobilePhone</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Remember that such an approach will have a significant impact on performance.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="table-name-prefix"></a>Table Name Prefix<a class="hash-link" href="#table-name-prefix" title="Direct link to heading">#</a></h2><p>When you are joining multiple data sources with columns of the same name, you will have to tell the SQL from which source you select each column. You can do it by using the table name prefix before the column name:</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">Example of SQL with full table name prefixes</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      _Sent</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> _Job</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailName</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> _Sent</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> _Job</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> _Job</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">JobID </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> _Sent</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">JobID</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>However, you probably saw in the previous examples that there is another way. You don&#x27;t have to write the full name of the data source every time. You can leverage aliases just as with columns to make it shorter:</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">Example of SQL with aliased table name prefixes</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> o</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EventDate </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> OpenDate</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> WelcomeCampaignSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> wel</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">INNER</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> _Open </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> o</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> o</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>All you need to do is write your alias after a data source name. For readability purposes, I recommend using the <code>AS</code> keyword between. Now you can leverage the shortened name to prefix the selected columns. It&#x27;s instrumental when pulling data from multiple Data Extensions.</p><p>Using table name prefixes is not always required (for example, when the two sources you <code>JOIN</code> don&#x27;t have any columns of the same name). You might see some examples without it. However, it is best practice to leverage this feature for consistency, readability and error-deferring purposes.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="multiple-joins"></a>Multiple Joins<a class="hash-link" href="#multiple-joins" title="Direct link to heading">#</a></h2><p>Joining two tables is just the beginning. Working with multiple columns can be much more mind-boggling, and in some cases taking paper and pencil to draw some <a href="https://en.wikipedia.org/wiki/Venn_diagram" target="_blank" rel="noopener noreferrer">Venn Diagrams</a> can make a huge difference. Let&#x27;s check some of the most popular use cases.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="multiple-inner-joins"></a>Multiple Inner Joins<a class="hash-link" href="#multiple-inner-joins" title="Direct link to heading">#</a></h3><p>In many cases, you will want to get a segment of people who simultaneously fulfil multiple requirements. For example, contacts that were part of three different ToFu campaigns related to a particular product. Such data might make an ideal audience for your next campaign further down in the marketing funnel. For such a scenario, you will use multiple <code>INNER JOIN</code> statements chained in one query:</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">Contacts used for three different ToFu campaigns that are ready for a MoFu campaign</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> nsl</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">PhoneNumber</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> ebo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EbookName</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> WelcomeCampaignSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> wel</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">INNER</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> NewsletterPromoCampaignSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> nsl</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> nsl</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">INNER</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> EbookDownloadCampaignSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> ebo</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> ebo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This SQL will only give you those contacts that were in all three Data Extensions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="multiple-left-joins"></a>Multiple Left Joins<a class="hash-link" href="#multiple-left-joins" title="Direct link to heading">#</a></h3><p>Another huge group of cases you might encounter are queries with multiple <code>LEFT JOIN</code> statements. They are great when you want to extend the data for your main data source with multiple other data points without losing records that do not have a match. Awesome for building a segment for a campaign from Data Extensions with extensive personalisation:</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">To the list of contacts, add the product details we want to use in the email content along with a special offer description</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      up</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> up</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> prod</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">ProductName</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> prod</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">ProductPrice</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> promo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">Offer</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> UpSellCampaignSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> up</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> ProductDetailsList </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> prod</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> prod</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">ProductId </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> up</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">OfferedProduct</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> CustomOfferList </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> promo</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> promo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">PromotionId </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> up</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">OfferedPromotion</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Notice that we joined additional Data Extensions on different columns in this case. What is more, we don&#x27;t need to <code>SELECT</code> those columns to filter on them. Thanks to using <code>LEFT JOIN</code> instead of <code>INNER JOIN</code>, this query will return to us also contacts that do not have any custom offer applied (we can hide appropriate content block with personalisation for them).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="multiple-various-joins"></a>Multiple Various Joins<a class="hash-link" href="#multiple-various-joins" title="Direct link to heading">#</a></h3><p>You are not limited to just one type of join when creating your query. You can mix and match different types of joins to extract precisely the data you need. However, the more complexity you add (either by the number of sources or by the number of various joins), the more recommended drawing the <a href="https://en.wikipedia.org/wiki/Venn_diagram" target="_blank" rel="noopener noreferrer">Venn Diagrams</a> will be.</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">Same query as above, but this time with a mix of INNER JOIN and LEFT JOIN</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      up</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> up</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> prod</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">ProductName</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> prod</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">ProductPrice</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> promo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">Offer</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> UpSellCampaignSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> up</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">INNER</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> ProductDetailsList </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> prod</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> prod</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">ProductId </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> up</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">OfferedProduct</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> CustomOfferList </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> promo</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> promo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">PromotionId </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> up</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">OfferedPromotion</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In the example above, we took the same query as for the Multiple Left Joins, but we changed the first <code>JOIN</code> type to <code>INNER</code>. What is the impact? This time, we will get only those contacts from <code>Up-Sell-Campaign-Segment</code> that have a matching product in <code>Product-Details-List</code> and only then we would extend them with optional information about the custom offer.</p><p>This approach might be better for our needs, as we would be sure that all contacts have available data for Product Name and Product Price. A great way to make our content better and more comfortable to create.</p><p>How complex can a <code>JOIN</code> can get? Very. You will encounter such monstrosities, especially in the world of reporting queries that require information from multiple System Data Views - for example, when you want to <a href="/docs/sql/sfmc-sql-snippet-debugging-email-sends">debug your email sends</a>.</p><p>One thing to remember - the more complex query you create, the more error-prone it is and the closer you are to the 30 minutes AutoKill limit for the query execution. Always minimise your query to only the data you truly need.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="union"></a>UNION<a class="hash-link" href="#union" title="Direct link to heading">#</a></h2><p>Apart from the <code>JOIN</code>, a <code>UNION</code> operator also serves a similar purpose. It concatenates the outcomes of multiple <a href="/docs/sql/sfmc-sql-select"><code>SELECT</code></a> statements.</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">Group subscribers from two Data Extensions</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      jan</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> jan</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> JanuaryEventParticipants </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> jan</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">UNION</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      feb</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> feb</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> FebruaryEventParticipantsSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> feb</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>As you can see in the above example, the <code>UNION</code> doesn&#x27;t require any relationship between the two queries. There is no <a href="#joining-on"><code>ON</code> element</a>. On the other hand, the <code>UNION</code> cannot add any new columns.</p><p><code>UNION</code> works only if:</p><ol><li>Both queries have the same number of columns.</li><li>Both queries have the same order of columns.</li><li>Columns in both queries have the same data types.</li></ol><p>The names do not have to be the same. You don&#x27;t even have to add aliases for static values. However, it is best practice to match the aliases across all queries for readability purposes.</p><p>To simplify the difference between <code>JOIN</code> and <code>UNION</code>:</p><ul><li>If you want to add columns - use <code>JOIN</code>.</li><li>If you want to add rows - use <code>UNION</code>.</li><li>If you want to add both - use both (or <a href="#full-join"><code>FULL JOIN</code></a>)</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>You Should Know</h5></div><div class="admonition-content"><p>By default, the <code>UNION</code> will ignore duplicates. If you want to keep them, use <code>UNION ALL</code>.</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">Group subscribers from two Data Extensions</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      jan</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> jan</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> JanuaryEventParticipantsSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> jan</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">UNION</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">ALL</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      feb</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> feb</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> FebruaryEventParticipantsSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> feb</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></div><p>The obvious use case for <code>UNION</code> is gathering subscribers from multiple Data Extensions to build a master segment.</p><p>There is, however, another use case that I find perfect for <code>UNION</code> - attaching Seedlists.</p><p>If you are using a deliverability monitoring suite, you probably are using seedlist. If not - a seedlist is a list of bot email addresses used to estimate your communication inbox placement.</p><p>In most cases, you will store your seedlist in a separate Data Extension and will have only Email Address and fake Subscriber Key columns filled in. How to push them quickly into your segment? With <code>UNION</code>, of course:</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">Append Seedlist to your Segment</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">FirstName</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">Interest</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> WelcomeCampaignSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> wel</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">UNION</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      sl</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> sl</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token string">&#x27;Seed&#x27;</span><span class="token plain">       </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> FirstName</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token string">&#x27;Estimating&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> Interest</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> Seedlist </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> sl</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In the example above, we add the Seedlist to the master segment and provide static value placeholders for columns used in personalisation.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>You Should Know</h5></div><div class="admonition-content"><p>You can mix and match <code>JOIN</code> and <code>UNION</code> to create your perfect segment. And even add arbitrary data without a <a href="/docs/sql/sfmc-sql-from"><code>FROM</code></a>.</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">AutoKill is the limit of your imagination</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">FirstName</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">Interest</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> WelcomeCampaignSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> wel</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">JOIN</span><span class="token plain"> InterestsDataPoint </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> i</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">ON</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> wel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">UNION</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      sl</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> sl</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token string">&#x27;Seed&#x27;</span><span class="token plain">       </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> FirstName</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token string">&#x27;Estimating&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> Interest</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> Seedlist </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> sl</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">UNION</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">ALL</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token string">&#x27;123456789987654321&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token string">&#x27;sales@company.com&#x27;</span><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> EmailAddress</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token string">&#x27;SalesDepartment&#x27;</span><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> FirstName</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token string">&#x27;Leads&#x27;</span><span class="token plain">              </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> Interest</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="intersect"></a>INTERSECT<a class="hash-link" href="#intersect" title="Direct link to heading">#</a></h2><p>The <code>INTERSECT</code> operator is very similar in usage to <a href="#union"><code>UNION</code></a>, but instead of concatenating outcomes, it outputs only those that exist in both queries.</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">Let&#x27;s check who converted from our Black Friday promotion</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"> bf</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> BlackFridayPromoSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> bf</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">INTERSECT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"> p</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> PurchasesDataPoint </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> p</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>As with <a href="#union"><code>UNION</code></a>, <code>INTERSECT</code> works only if:</p><ol><li>Both queries have the same number of columns.</li><li>Both queries have the same order of columns.</li><li>Columns in both queries have the same data types.</li></ol><p>The check for rows existing in both queries is done considering data in all provided columns.</p><p>You can have the same outcome with more control over comparison logic with a mix of <a href="/docs/sql/sfmc-sql-join"><code>JOIN</code></a> and <a href="/docs/sql/sfmc-sql-where"><code>WHERE</code></a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="except"></a>EXCEPT<a class="hash-link" href="#except" title="Direct link to heading">#</a></h2><p>The <code>EXCEPT</code> operator is very similar in usage to <a href="#union"><code>UNION</code></a>, but instead of concatenating outcomes, it outputs only those that exist in the first query.</p><div class="codeBlockContainer_K1bP"><div style="color:rgb(36, 41, 46);background-color:#f6f8fa" class="codeBlockTitle_eoMF">Let&#x27;s check who did not convert from our Black Friday promotion</div><div class="codeBlockContent_hGly sql"><div tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"> bf</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> BlackFridayPromoSegment </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> bf</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">EXCEPT</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">SELECT</span><span class="token plain"> p</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">SubscriberKey</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">FROM</span><span class="token plain"> PurchasesDataPoint </span><span class="token keyword" style="color:#e3116c">AS</span><span class="token plain"> p</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>As with <a href="#union"><code>UNION</code></a>, <code>EXCEPT</code> works only if:</p><ol><li>Both queries have the same number of columns.</li><li>Both queries have the same order of columns.</li><li>Columns in both queries have the same data types.</li></ol><p>The check for rows existing in both queries is done considering data in all provided columns.</p><p>You can have the same outcome with more control over comparison logic with a mix of <a href="/docs/sql/sfmc-sql-join"><code>JOIN</code></a> and <a href="/docs/sql/sfmc-sql-where"><code>WHERE</code></a>.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/MateuszDabrowski/mateuszdabrowski.pl/edit/master/docs/sql/sfmc-sql-join.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-03-25T23:13:03.000Z" class="lastUpdatedDate_1WI_">3/26/2021</time> by <strong>Mateusz DÄ…browski</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/sql/sfmc-sql-from"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« SFMC SQL From</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/sql/sfmc-sql-where"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SFMC SQL Where Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#join-types" class="table-of-contents__link">JOIN Types</a><ul><li><a href="#inner-join" class="table-of-contents__link">Inner Join</a></li><li><a href="#left-and-right-joins" class="table-of-contents__link">Left and Right Joins</a></li><li><a href="#full-join" class="table-of-contents__link">Full Join</a></li><li><a href="#self-join" class="table-of-contents__link">Self-join</a></li></ul></li><li><a href="#joining-on" class="table-of-contents__link">Joining ON</a></li><li><a href="#table-name-prefix" class="table-of-contents__link">Table Name Prefix</a></li><li><a href="#multiple-joins" class="table-of-contents__link">Multiple Joins</a><ul><li><a href="#multiple-inner-joins" class="table-of-contents__link">Multiple Inner Joins</a></li><li><a href="#multiple-left-joins" class="table-of-contents__link">Multiple Left Joins</a></li><li><a href="#multiple-various-joins" class="table-of-contents__link">Multiple Various Joins</a></li></ul></li><li><a href="#union" class="table-of-contents__link">UNION</a></li><li><a href="#intersect" class="table-of-contents__link">INTERSECT</a></li><li><a href="#except" class="table-of-contents__link">EXCEPT</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs &amp; Snippets</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/ssjs/ssjs-if-and-switch">SSJS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/js/js-if-and-switch">JavaScript</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sql/sfmc-sql-basics">SFMC SQL</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/config/sfmc-config-permissions">SFMC Config</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">About</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/sites/my-toolset">Toolset</a></li><li class="footer__item"><a class="footer__link-item" href="/ideas">Ideas</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/sites/licence">Licence &amp; Attribution</a></li><li class="footer__item"><a class="footer__link-item" href="/sites/privacy">Privacy</a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/assets/js/styles.be07aeb8.js"></script>
<script src="/assets/js/runtime~main.4618cae2.js"></script>
<script src="/assets/js/main.efb4bc36.js"></script>
<script src="/assets/js/1.18c2bb3c.js"></script>
<script src="/assets/js/2.4f1ad9e9.js"></script>
<script src="/assets/js/43.c76fdf0e.js"></script>
<script src="/assets/js/46.aca6cb3a.js"></script>
<script src="/assets/js/935f2afb.275a9d6b.js"></script>
<script src="/assets/js/17896441.5f8edaba.js"></script>
<script src="/assets/js/5ee690fc.1b328ad5.js"></script>
</body>
</html>