---
id: sfmc-sql-basics
title: SFMC SQL Basics
sidebar_label: SQL Basics
description: SELECT your data FROM Salesforce Marketing Cloud WHERE drag-and-drop Filters are not enough.
image: img/og/og-image-sql-basics.png
tags: [Marketing Cloud, SQL]
---

import { LeadText } from '../../src/components/LeadText.js';
import DocCardList from '@theme/DocCardList';

<LeadText content='SELECT your data FROM Salesforce Marketing Cloud WHERE drag-and-drop Filters are not enough.' />

## How to segment data in Marketing Cloud

Salesforce Marketing Cloud offers few different ways of segmenting data for your marketing needs. Out-of-the-box, you can use Filters and SQL Query Activities.

Filters are strightforward, drag-and-drop solution for one-time (Filtered Data Extensions) or refreshed on schedule (Data Filters with Automation) segmentation. Unfortunatelly, they are very limited, as they allow you to just copy single Data Extension with all its columns with filtered down amount of rows. That filtering can leverage source Data Extension values, another Data Extension values (through Data Relationship) or Measures. That's it. For real Marketing Automation, it's not enough.

This is why you are looking to learn about SFMC SQL. Along with Automation Studio Query Activity it will allow you to deploy any segmentation scenario you might want with full control over the output columns, names and values. However, with great power comes some learning required.

There is also a third way - paid AppExchange solutions that offer you a way to eat a cookie and have a cookie: full power of SQL with a drag-and-drop interface. For a price.

You can check my comparision of all above options in my [here](../config/sfmc-appexchange-solutions.mdx#sfmc-segmentation-solutions). In this article we will focus only on the most powerful and free option - SFMC SQL.

## SQL in Salesforce Marketing Cloud

SQL (Structured Query Language) is one of the best ways to work with relational databases. And Marketing Cloud's Data Extensions, with the help of Data Designer, offers precisely that. A relational database. Same for system Data Views containing tracking data. Because of this, SQL is used in SFMC whenever powerful segmentation is needed (mostly using Automation Studio).

The main difference from standard SQL (SFMC uses more or less SQL Server 2016) is that SFMC supports only `SELECT` statement. Neither `INSERT`, `UPDATE` or `DELETE` are officially supported. It is because the queries are executed as a part of the backend query and are limited to provide non-breakable functionality.

Another limiting characteristic of SFMC SQL is visible in the data accessible by queries. Only data stored in data extensions or system data views is available. Moreover, you can save the results only to the data extensions. The reason is other data structures of SFMC are not relational databases.

Finally, the significant limitation that you might hit as your Marketing Cloud grows is the AutoKill. It will automatically stop your query if execution time exceeds the 30 minutes limit. Think about the query with the future in mind. It is especially important for queries that are supposed to be backbones of your data management flow in Marketing Cloud. Even if it works great now, consider how it will behave once you have more data in the system. One of the great ways to not trigger AutoKill is to implement retention periods for the Data Extensions used in the query to limit input data.

## Where to learn SFMC SQL

Before we start witht the real deal, let's cover where to learn writing SQL. My recommendation is to get a [Query Studio](../config/sfmc-appexchange-solutions.mdx#query-studio). It's a free AppExchange add-on to Marketing Cloud developed by Salesforce. While it has its cons, it's perfect for quickly learning how to query.

If you cannot install this app in your Marketing Cloud, you still can learn using Query Activities in Automation Studio, but it will be much less user-friendly. For each change in the query you will have to update the target Data Extension manually and go through multiple steps across the platform to see the results.

My personal approach is to always start in [Query Studio](../config/sfmc-appexchange-solutions.mdx#query-studio) and only once my SQL Query is complete and validated I move it to Automation Studio.

## How to learn SFMC SQL

SFMC SQL is very limited compared to full power of Structured Query Language, but there is still quite a lot of topics to cover. To make it easier, I split them into steps that slowly add more complex concepts. Still, every step should give you some tangible knowledge that you can actively use in your work.

### Step 1




## Fundamentals of SQL queries

SQL is straightforward to read but requires a bit of understanding to write. However, with only the [`SELECT`](./sfmc-sql-select.mdx) being available in Marketing Cloud, it is effortless to grasp.

There are four most important elements that you will be using in nearly every query in SFMC:

* [`SELECT`](./sfmc-sql-select.mdx): tell the query what data you want to leverage
* [`FROM`](./sfmc-sql-from.mdx): tell the query where the data is in Marketing Cloud (name of Data Extension or System Data View)
* [`JOIN`](./sfmc-sql-join.mdx): tell the query how you want to merge data from multiple sources
* [`WHERE`](./sfmc-sql-where.mdx): tell the query which part of the above data is interesting to you

However, there is much to learn to unlock the full power of SQL in SFMC. Check out deep-dive docs on SQL operators ([`LIKE`](./sfmc-sql-like.mdx), [`CASE`](./sfmc-sql-case.mdx)), functions ([String](./sfmc-sql-string-functions.mdx), [Date](./sfmc-sql-date-functions.mdx), [Numeric](./sfmc-sql-numeric-functions.mdx), [Conversion](./sfmc-sql-conversion-functions.mdx), [Aggregate](./sfmc-sql-aggregate-functions.mdx)) and [SFMC System Data Views](../config/sfmc-system-data-views.mdx).

Knowing the available functions is one thing. Writing good and readable queries - another. Salesforce Marketing Cloud is always a team sport, so be sure to leverage the power of a [Style Guide](./sfmc-sql-style-guide.mdx) to improve the quality of your SQL.

### Order of operations

One of the key things to remember when building more complex queries is the order of operations, as it will decide what is in the output:

[`FROM`](./sfmc-sql-from.mdx) > [`WHERE`](./sfmc-sql-where.mdx) > [`GROUP BY`](#group-by) > [`HAVING`](#having) > [`DISTINCT`](./sfmc-sql-select.mdx#distinct) > [`ORDER BY`](./sfmc-sql-select.mdx#top-with-order-by)

It means that rows filtered with `WHERE` will not be taken into consideration for `GROUP BY` and that `DISTINCT` deduplication will be applied to results grouped and filtered by `HAVING` - not the source data.

## All SQL Guides

<DocCardList />