---
id: sfmc-code-resources
title: SFMC Code Resources
sidebar_label: Power of Code Resources
description: Learn how to use and abuse SFMC Code Resources, the free-of-charge programmatic powerhouse.
image: img/og/og-image-sfmc-code-resources.png
tags: [Marketing Cloud, SSJS, AMPScript, Snippet, Cloud Page, App]
---

import { LeadText } from '../../src/components/LeadText.js';

<LeadText content="Learn how to use and abuse SFMC Code Resources, the free-of-charge programmatic powerhouse." />

## What are the Code Resources?

Code Resources in Salesforce Marketing Cloud are a solution for hosting JavaScript, CSS, JSON, RSS, Text and XML files within your account.

They were part of the legacy Classic CloudPages. However, their features and usefulness allowed them to survive sunsetting and thrive in the Web Studio. With [Spring '22 Release](https://help.salesforce.com/s/articleView?id=sf.mc_rn_2022_spring_cloud_pages_classic_editor_migrated_to_content_builder.htm&type=5) they got a new home in Content Builder, and live along Content Blocks.

You may ask - why use Code Resources when we have new CloudPages in Web Studio and Code Content Blocks in Content Builder? As I highlighted above, a unique set of features makes Code Resources irreplaceable:

- Unlike Content Blocks, Code Resources have their __own URL__. It means that they are not just a building block, but can works alone as a web asset. It also means that they can be linked and API called as any other website.
- Unlike Cloud Pages, Code Resources have __no HTML structures appended automatically__ by Marketing Cloud. This allows you to have full control over what is returned by the Code Resource.
- Unlike externally hosted file, you can leverage SFMC programmatic solutions - __SSJS and AMPScript__ - to provide a backend logic to your Code Resources.
- Finally, unlike Cloud Pages, there is __no cost__ associated with loading a Code Resource.

That combination makes Code Resources perfect for multiple use cases - from very basic to complex ones. Let's see some examples.

## Code Resource Use Cases

### The Basics

The most obvious use case is hosting shared CSS and JavaScript, just as you would on a CMS. It works great - you can just paste your stylesheet or scripts and import it the standard way to your Cloud Pages benefitting from storing all assets on the same server:

```html title="JS & CSS imports from Code Resources - the URLs will follow your Marketing Cloud configuration"
<link rel="stylesheet" type="text/css" href="https://coderesource.sfmc.com/my-css" />
<script src="https://coderesource.sfmc.com/my-js"></script>
```

Similarly, you can store a complex data structures in the form of JSON or XML files to leverage it later with SSJS or AMPScript/GTL - for deep immutable structures it can be a better solution then Data Extensions.

This approach, as useful as it is, does not showcase the true strength of the Code Resources.

### The Fun Things

The real power comes with the use of Salesforce Marketign Cloud programmatic languages - AMPScript and SSJS. Those two allow you to execute logic on the backend and impact the front-facing outcome on the Code Resource. This enables some powerful use cases.

#### Dynamic Code Resources

For example, you cannot host fonts in Marketing Cloud. But, you can encode them to base64 and in that format add to your CSS Code Resource.

```css title="Web Font in CSS Code Resource" {1,4}
%%[ SET @SalesforceSansRegular = "AAEAAAASAQAAABAAgR0RFRgQOBQMAAN38AAAAKEdQT1N..." ]%%
@font-face {
    font-family: "Salesforce Sans";
    src: url(data:font/ttf;base64,%%=v(@SalesforceSansRegular)=%%) format('truetype');
    font-weight: 400;
    font-display: swap;
}
```

Sometimes, however, you might need different font depending on the market to cover various alphabets. Adding all those fonts to your CSS is not a good idea. You can leverage the power of SFMC programmatic languages to load only the required font. How? By requesting the specific font using a query parameter:

```html title="CSS Import with query parameter on the Frontend"
<link rel="stylesheet" type="text/css" href="https://coderesource.sfmc.com/my-css?font=salesforce-sans" />
```

```css {2-3} title="Dynamic Stylesheet on the backend"
%%[
    SET @FontSelected = RequestParameter("font")
    IF @FontSelected == "salesforce-sans" THEN
        SET @FontName = "Salesforce Sans"
        SET @FontInBase64 = "AAEAAAASAQAAABAAgR0RFRgQOBQMAAN38AAAAKEdQT1N..."
    ELSE
        SET @FontName = "Different Font"
        SET @FontInBase64 = "AAAEEMDJJEkdEDKEJ849DJEHD33DJslsAAAA3EKFEK03..."
    ENDIF
]%%
@font-face {
    font-family: "%%=v(@FontName)=%%";
    src: url(data:font/ttf;base64,%%=v(@FontInBase64)=%%) format('truetype');
    font-weight: 400;
    font-display: swap;
}
```

#### Personalised Code Resources

Making your CSS or JS dynamic is just the beginning. Code Resources let's you leverage the Marketing Cloud Data Model. With SSJS and AMPScript you can make Lookups and use other functions to adapt the outcome to a specific subscriber.

It is especially useful when you want to hide the business logic from competition. For example you might have a script for a web form that calculates rates based on loyalty status, purchases and LTV. You don't have to share your logic in accessible JavaScript - you can Lookup required data for each subscriber with SSJS and calculate everything there - outputting only the final multipliers to your JS Code Resource.

You can even perform API calls with SSJS or AMPScript to external systems to take advantage of their data in a secure manner. That can be especially useful when working with JSON Code Resources that can hold whole data structures used for presentation layer on the Cloud Page.

#### Generated Code Resources

JSON Code Resources are where the real magic happens. This is because they pair beautifully with SSJS and allows us to generate whole outputs from scratch with a nifty combination of SSJS object, `Stringify()` function and `<ctrl:var name=string />` personalisation string. Yeah, you can have no line of JSON in your JSON Code Resource and still use it to its fullest potential. Let's dive into details.

```html {3,5} title="Make a JSON from external data"
<script runat='server'>
    (...)
    var stringifiedResult = Stringify({ 'created': createdAssets, 'deleted': deletedAssets });
</script>
<ctrl:var name=stringifiedResult />
```

As you can see above, there is no line of JSON, but the Code Resource will output a proper JSON. How? As the SSJS and AMPScript are executed on the backend, their code is deleted from the output. However, with personalisation string, you can push some data to the frontend. And if that data is an SSJS object, then with `Stringify` you can convert it to proper JSON.

This trick enables many different use cases that make Code Resources shine:

1. AMPScript and [SSJS debugging](../ssjs/debugging-ssjs.mdx) - there are many places where you might want to use SFMC programmatic languages, but most of them either doesn't allow for easy debugging or drive SuperMessages costs. Code Resources are free and allow you to output error descriptions.
2. Deploying, cleaning and retrieving scripts - there are a lot of situations where doing things through SFMC User Interface is not the best option. Deploying dozens of Data Extensions on multiple business units, cleaning hundreds of archival images or pulling asset JSONs for version control - all those use cases can be covered with a script that can do the work in a fraction of time needed for manual approach. What is more, there are some things that cannot be done through UI at all (like targeting AutoSuppression List with Query Activity). Code Resource again will allow you to write, test and run such solutions. For free.
3. Creating custom mini backends - that use case deserves it's own section ;)

### The Backends



## Code Resource Security

## Examples