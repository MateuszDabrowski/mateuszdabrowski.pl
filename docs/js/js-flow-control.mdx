---
id: js-flow-control
title: Flow Control
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import { LeadText } from '../../src/components/LeadText.js';

<LeadText content='If, Ternary, Switch, Shortcircuit, Timer, Interval' />

## If Statements

The most popular way of handling conditional logic is the `if` statement. It is universal, flexible, and easy to understand.

```js {2} title="Create a segment of customers that made more than two purchases"
for (let customer of customers) {
    if (customer.purchases > 2) {
        marketingSegment.push(customer.email);
    }
}
```

### And, Or, Brackets

The `if` statement is even more powerful if you also use ORs (`||`), ANDs (`&&`) and brackets:
```js {2,4} title="Split customers into two segments depending on a condition group"
for (let customer of customers) {
    if (customer.purchases <=2 || customer.lastPurchaseDate <= new Date('2019-12-31')) {
        reengagementCampaignSegment.push(customer);
    } else if (customer.purchases > 2 && customer.lastPurchaseDate > new Date('2019-12-31')) {
        upsellCampaignSegment.push(customer);
    }
}
```

### Boolean evaluation

You can use boolean values of variables/methods/functions to control the flow without operator:
```js {3} title="If the customer has domain of your competiton, add him to blocklist"
for (let customer of customers) {
    const competitionUser = customer.email.includes('@competition.com');
    if (competitionUser) {  // if comptetitionUser evaluates to true, if content will be exectuted
        blocklist.push(customer);
    }
}
```

### Flip Booleans with Bang

Bang symbol (`!`) can be used to flip booleans:
```js {3} title="If the customer does not have competition domain in email, add him to campaign"
for (let customer of customers) {
    const competitionUser = customer.email.includes('@competition.com');
    if (!competitionUser) {  // if not competition user, execute content
        campaignSegment.push(customer);
    }
}
```

Bang not only functions as a NOT operator, it also changes truthy and falsy values into a (opposite) boolean.

Falsy values in JavaScript are: `false`, `0`, empty string `""`, `null`, `undefined`, `NaN`.
All other possible values are considered truthy.

This is very useful, as it allows you to leverage boolean evaluation on truthy values:

``` js {3} title="Applies either personalized name or default value"
for (let customer of customers) {
    let helloPersonalization;
    if (customer.firstName) {
        helloPersonalization = customer.firstName;
    } else if (!customer.firstName) {
        helloPersonalization = 'Valued Customer';
    }
}
```

Just to make it clear - above code is very "dirty" and can be wrriten much better (for example without `else if` by applying default value on variable initialization). Example how to write it better will be shown soon.

:::note You Should Know

You can leverage this feature twice by using double bang `!!` to convert truthy/falsy value into (appropriate) boolean.

```js title="If optInDate has any value (is not empty) the isOptedIn variable will evaluate to true"
const isOptedIn = !!optInDate;
```

:::

### If shorthand

For simple, one-line `if` statements, there is also a shorthand:
```js title="If the customer is opted in, send an email"
if (isOptedIn) sendEmail(emailAddress, emailID);
```

You could probably use the `if` statements only for the logic of your code. But you shouldn't. There are some very interesing and useful alternatives worth checking out.

----

## Ternaries

If a simple `if` statement has only two possible outcomes depending on a condition, ternary is a simpler and more readable. Based on previous example, instead of:
```js {2-7}
for (let customer of customers) {
    let helloPersonalization;
    if (customer.firstName) {
        helloPersonalization = customer.firstName;
    } else if (!customer.firstName) {
        helloPersonalization = 'Valued Customer';
    }
}
```

we can use a clean ternary:

```js {2}
for (let customer of customers) {
    let helloPersonalization = customer.firstName ? customer.firstName : 'Valued Customer';
}
```

Instead of 6 lines of code, we have 1. Awesome. But how does it work? Ternary structure looks like this: `variable = condition ? valueIfTrue : valueIfFalse;`. So in the example above, if the `customer.firstName` is not empty (is truthy), it will be pushed as the value of `helloPersonalization`. If it is empty, the default value will be assigned instead.

:::note You Should Know

Ternary can be used not only for the if statement.
It can be awesome to customize text with interpolation:

```js title="Fill in the sentence with different words depending on boolean value of isOptedIn"
const areYouOptedIn = `You are ${isOptedIn ? 'opted in' : 'not opted in'}`;
```

Ternaries are not limited to variables and strings. They can also run functions:

```js title="If isLoggedIn is false, the redirectToLogInPage function will be executed"
isLoggedIn ? redirectToLogInPage() : null;
```

:::

----

## Shortcircuting

```js
function check1() {
    return true;
}
function check2() {
    return false;
}
function check3() {
    return true;
}
if (check1() && check2()) {
    console.log('All checks passed');
} else {
    console.log('Some checks failed');
}
```
In the above example the check3 won't be even checked, as with && the first false will break whole checking and return the else.

This can be abused to shortcircuit pseudo-ternary:

```js
isAdmin && showAdminBar() // Very popular in React with components
```

----

## Switch Statement

```js
switch (event.key) {
    case 'ArrowUp':
        y -= 1;
        break;
    case 'ArrowDown':
        y += 1;
        break;
    case 'ArrowLeft':
        x -= 1;
        break;
    case 'ArrowRight':
        x += 1;
        break;
    default:
        console.log('This is not a valid move');
        break;
}
```

----

## Intervals & Timers

Timeout allows to launch a function after given delay - it does not stop the JavaScript from running forward (asynchronous).
```js
setTimeout(callbackFunction, miliseconds);
```

Intervals works the same as timeouts, but instead of delaying something, it launches function on and on every interval.
```js
setInterval(callbackFunction, miliseconds);
```

Interval launches for the first time after the given interval time passess. It can be overcome with custom function:
```js
function setImmediateInterval(funcToRun, ms) {
    funcToRun();
    return setInterval(funcToRun, ms);
}
setImmediateInterval(callbackFunction, 500);
```

----

### Deleting Interval & Timer

To be able to stop interval or timer, it first needs to be referencable:
```js
const timer = setTimeout(callbackFunction, miliseconds);
clearTimeout(timer);
const interval = setInterval(callbackFunction, miliseconds);
clearInterval(interval);
```

Neat idea might be to use setTimer to clearInterval on concurrently running setInterval.