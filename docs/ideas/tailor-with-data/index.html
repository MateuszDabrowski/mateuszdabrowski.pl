<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-121919433-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Tailor the experience with data logic | Mateusz Dąbrowski</title><meta data-react-helmet="true" property="og:image" content="https://mateuszdabrowski.pl/img/logotyp-og.png"><meta data-react-helmet="true" property="twitter:image" content="https://mateuszdabrowski.pl/img/logotyp-og.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Mateusz Dąbrowski"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Tailor the experience with data logic | Mateusz Dąbrowski"><meta data-react-helmet="true" name="description" content="Outline"><meta data-react-helmet="true" property="og:description" content="Outline"><meta data-react-helmet="true" property="og:url" content="https://mateuszdabrowski.pl/docs/ideas/tailor-with-data"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://mateuszdabrowski.pl/docs/ideas/tailor-with-data"><link rel="stylesheet" href="/styles.f03533f6.css">
<link rel="preload" href="/styles.8b734d68.js" as="script">
<link rel="preload" href="/runtime~main.7078fd9f.js" as="script">
<link rel="preload" href="/main.777e0ea4.js" as="script">
<link rel="preload" href="/1.9a912c39.js" as="script">
<link rel="preload" href="/2.6fe32394.js" as="script">
<link rel="preload" href="/19.c4578225.js" as="script">
<link rel="preload" href="/20.31b1fab7.js" as="script">
<link rel="preload" href="/20ac7829.4fab0293.js" as="script">
<link rel="preload" href="/17896441.1aa57ae8.js" as="script">
<link rel="preload" href="/8d9c1074.99ce9ac3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo-horizontal-light-2x.png" alt="Mateusz Dąbrowski Logo"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs &amp; Snippets</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/ideas">Ideas</a></div><div class="navbar__items navbar__items--right"><a href="https://www.linkedin.com/in/mateusz-dabrowski-marketing/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-linkedin-link" aria-label="LinkedIn Profile"></a><a href="https://github.com/MateuszDabrowski" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo-horizontal-light-2x.png" alt="Mateusz Dąbrowski Logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs">Docs &amp; Snippets</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/ideas">Ideas</a></li><li class="menu__list-item"><a href="https://www.linkedin.com/in/mateusz-dabrowski-marketing/" target="_blank" rel="noopener noreferrer" class="menu__link header-linkedin-link" aria-label="LinkedIn Profile"></a></li><li class="menu__list-item"><a href="https://github.com/MateuszDabrowski" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Tailor the experience with data logic</h1></header><div class="markdown"><p id="leadText_rx-B">Everyone and his boss are talking about personalization. Most stop at tailoring the content. Don&#x27;t be that person. Utilise the power of simple data logic and control the user flows.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="outline"></a>Outline<a aria-hidden="true" tabindex="-1" class="hash-link" href="#outline" title="Direct link to heading">#</a></h2><ol><li><a href="#leverage-the-data">Review the use cases possible thanks to the tailored data logic</a></li><li><a href="#script-your-solution">Check easy to implement script examples</a></li><li><a href="#create-conditional-logic">Create personalization fueled conditional user flows</a></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="leverage-the-data"></a>Leverage the data<a aria-hidden="true" tabindex="-1" class="hash-link" href="#leverage-the-data" title="Direct link to heading">#</a></h2><p>Most Marketing Automation tools allow you to use the contact and account data for personalization. Inserting a user-specific value from a data model to landing page or e-mail? Creating custom content tailored to the user? Easy and simple. <a href="https://www.oracle.com/marketingcloud/products/marketing-automation/" target="_blank" rel="noopener noreferrer" title="Oracle Eloqua Marketing Automation Platform">Eloqua</a>&#x27;s <a href="https://docs.oracle.com/cloud/latest/marketingcs_gs/OMCAA/Help/FieldMerges/FieldMerges.htm" title="Field Merge Documentation">Field Merges</a> or <a href="https://www.salesforce.com/eu/products/marketing-cloud/overview/" target="_blank" rel="noopener noreferrer" title="Salesforce Marketing Cloud Platform">Marketing Cloud</a>&#x27;s personalization strings are made for it. But you can do so much more!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="change-the-structure-of-the-landing-page"></a>Change the structure of the landing page<a aria-hidden="true" tabindex="-1" class="hash-link" href="#change-the-structure-of-the-landing-page" title="Direct link to heading">#</a></h3><p>Part of your subscription centre should be visible only to your clients? Instead of creating and managing two separate pages, you can use personalization to check whether the visitor has any license and unhide product-related data &amp; subscription section.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="create-a-genuinely-dynamic-form"></a>Create a genuinely dynamic form<a aria-hidden="true" tabindex="-1" class="hash-link" href="#create-a-genuinely-dynamic-form" title="Direct link to heading">#</a></h3><p>Not keen on asking your customers, again and again, the same questions in your content form? Use personalization to hide form fields that won&#x27;t give you new knowledge. The shorter the form, the better.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="enrich-your-data"></a>Enrich your data<a aria-hidden="true" tabindex="-1" class="hash-link" href="#enrich-your-data" title="Direct link to heading">#</a></h3><p>You got multi picklist storing information on topics that are interesting to your customers? Want to use white paper download form to add such data point? Sure, all Marketing Automation Platforms have form processing that will be able to append such value. But unfortunately, it in most it is not possible to check whether it already is added to that field. You guessed it, personalization with a simple script can fix it.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="script-your-solution"></a>Script your solution<a aria-hidden="true" tabindex="-1" class="hash-link" href="#script-your-solution" title="Direct link to heading">#</a></h2><p>Time to create a script that will solve the problems mentioned above. Firstly, you will need to get the data from your data model.</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_3zTA tabs__item--active">Salesforce Marketing Cloud</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_3zTA">Oracle Eloqua</li></ul><div role="tabpanel" class="margin-vert--md"><div><p>For Marketing Cloud, the easiest way is to use the personalization string. The code is straightforward:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-html codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">ctrl:</span><span class="token tag" style="color:#00009f">field</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation" style="color:#393A34">=</span><span class="token tag attr-value" style="color:#e3116c">ProfileAttributeName</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span></div></div></div></div></div><p>The only thing you need is the name of ProfileAttribute or field from source Sendable Data Extension. It gets a bit more elaborate if you want to leverage other source, but absolutely viable. You can use Lookup function to capture data points from other Data Extensions. Even Salesforce Objects are in the scope with a bit of AMPScript.</p><p>In most places of Marketing Cloud you can leverage built-in menu to add such personalization string (in its AMPScript version).</p></div></div></div><p>To create a script that will allow for three use cases mentioned in the first part of the post, we need one more thing - an <code>id</code> attribute. Some elements will already have it (for example, in Eloqua each form field exists in separate div element: <code>&lt;div id=&quot;formElement1&quot; ...&gt;</code>). The rest will need you to add it to the HTML manually.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>You Should Know</h5></div><div class="admonition-content"><p>You are not limited to <code>id</code> attribute. You can leverage any attribute and caputre it with <code>document.querySelector()</code> or <code>document.querySelectorAll()</code>. Capturing <code>class</code> is great to change multiple parts of the website at once.</p></div></div><p>With personalization code and value of the <code>id</code> attribute at hand, we can start the (short) scripting.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="hiding-elements-on-the-website"></a>Hiding elements on the website<a aria-hidden="true" tabindex="-1" class="hash-link" href="#hiding-elements-on-the-website" title="Direct link to heading">#</a></h3><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_3zTA tabs__item--active">Salesforce Marketing Cloud</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_3zTA">Oracle Eloqua</li></ul><div role="tabpanel" class="margin-vert--md"><div><div class="mdxCodeBlock_iHAB"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_U1PS">Hide element with id=&#x27;idName&#x27; if viewers EmailOptedIn attribute has value &#x27;True&#x27;</div><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj undefined">Copy</button><div tabindex="0" class="prism-code language-html codeBlock_19pQ codeBlockWithTitle_2fj3"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript dom variable" style="color:#36acaa">window</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">addEventListener</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;load&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript arrow operator" style="color:#393A34">=&gt;</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"> </span><span class="token script language-javascript comment" style="color:#999988;font-style:italic">// 1.</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript keyword" style="color:#00009f">if</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;&lt;ctrl:field name=EmailOptedIn /&gt;&#x27;</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:#393A34">===</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:#e3116c">&#x27;True&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"> </span><span class="token script language-javascript comment" style="color:#999988;font-style:italic">// 2.</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">            </span><span class="token script language-javascript dom variable" style="color:#36acaa">document</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">querySelector</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&quot;#idValue&quot;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript property-access">display</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:#e3116c">&quot;none&quot;</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"> </span><span class="token script language-javascript comment" style="color:#999988;font-style:italic">// 3.</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span></div></div></div></div></div></div></div></div><p>Above script has three important lines that deserve some explanation.</p><p>First one tells the web browser to launch the logic only after the whole page loaded. It is very important, as it guarantees that the website element you want to hide was already rendered by the browser.</p><p>Next is the <code>if</code> statement. It evaluates the value stored in the data model received via personalization (left side of ==) with another value we choose (right side of ==). In this case, it checks whether Email Opted In for a particular user is set to True (that value may differ in your data model).</p><p>Third line looks for an HTML element with id equal to <code>&#x27;idValue&#x27;</code> and hides it from the user.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>You Should Know</h5></div><div class="admonition-content"><p>You can adapt this script to do almost anything. Once you have your element selected with <code>querySelector</code> you can programmatically change its value, add or remove a class from it to impact the CSS applied or even add or remove elements around it.</p></div></div><p>With this script, you can both modify the structure of your landing page and alter the form fields (or even just form field options) visible for the user. Hide some elements, show other, change the style of a web element to make it more prominent on the website. But that is not all!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="changing-elements-on-the-website"></a>Changing elements on the website<a aria-hidden="true" tabindex="-1" class="hash-link" href="#changing-elements-on-the-website" title="Direct link to heading">#</a></h3><p>For our data enrichment use case, we will need to alter the script slightly.</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_3zTA tabs__item--active">Salesforce Marketing Cloud</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_3zTA">Oracle Eloqua</li></ul><div role="tabpanel" class="margin-vert--md"><div><div class="mdxCodeBlock_iHAB"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_U1PS">Change value of a hidden form field if Profile Attribute value includes &#x27;Tax&#x27;</div><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj undefined">Copy</button><div tabindex="0" class="prism-code language-html codeBlock_19pQ codeBlockWithTitle_2fj3"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript dom variable" style="color:#36acaa">window</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">addEventListener</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;load&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript arrow operator" style="color:#393A34">=&gt;</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"> </span><span class="token script language-javascript comment" style="color:#999988;font-style:italic">// 1.</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript keyword" style="color:#00009f">const</span><span class="token script language-javascript"> regexSearchValue </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript regex" style="color:#36acaa">/Tax/</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"> </span><span class="token script language-javascript comment" style="color:#999988;font-style:italic">// 2.</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript keyword" style="color:#00009f">if</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript">regexSearchValue</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">test</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&quot;&lt;ctrl:var name=Interests /&gt;&quot;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"> </span><span class="token script language-javascript comment" style="color:#999988;font-style:italic">// 3.</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">            </span><span class="token script language-javascript dom variable" style="color:#36acaa">document</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">querySelector</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&quot;#alreadyInterested&quot;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript property-access">value</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:#e3116c">&#x27;True&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"> </span><span class="token script language-javascript comment" style="color:#999988;font-style:italic">// 4.</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span></div></div></div></div></div></div></div></div><p>In this scenario we have a multipicklist field <code>Interests</code> that captures what captivates specific customer. If the is fascinated by more than one topic, the names are semicolon separated. Nice marketing tactic is to enrich this list each time the customer engages with something directly related to a particular topic. For example downloads whitepaper deep-diving on taxes.</p><p>In most Marketing Automation Platforms it is really easy to just append interest to such field. This, however, leads to a (quite big) possibility of having the same interest added multiple times. And this is neither good from the data quality perspective nor field length compliance.</p><p>So how to use the above script to enrich your data cleanly? We will need a hidden form field inside the white paper download form. In the form HTML look for input attribute of this hidden field (<code>&lt;input id=&quot;alreadyInterested&quot; type=&quot;hidden&quot; ...&gt;</code>). The <code>id</code> attribute will be useful again.</p><p>You already know the first line from previous section. The new things come next. We declare value we want to check in our data model picklist. In this example, we will test whether the user is already interested in Tax topic. The <code>/</code> before and after the word are special characters used for <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank" rel="noopener noreferrer" title="MDN Documentation on Regular_Expressions">regular expression</a>.</p><p>The third line is the fastest way to check whether the declared value is already in <code>Interests</code> field. If it is, then the script will evaluate the line below.</p><p>Finally, in case of the value already being in the multi picklist, we put True inside the hidden form field. With it is done, we can then utilise form processing to append new interest conditionally - only if hidden field is blank in the submission data.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="create-conditional-logic"></a>Create conditional logic<a aria-hidden="true" tabindex="-1" class="hash-link" href="#create-conditional-logic" title="Direct link to heading">#</a></h2><p>Simple manipulation of visibility and values on your landing page is just beginning. You can get even more out of scripted personalizations and take control over user &amp; data flows.</p><p>Looking for an excellent way to tell your Google Analytics whether the user just downloaded a white paper or did he also wanted to receive product presentation on top of that? Not keen on creating two mirror-like thank you pages with different conversion script? Sure!</p><p>Your form should have a processing step that appends date stamp to a data model field in case of the user becoming a lead (asking for a product presentation). This data, apart from being a great source of knowledge for your lead reporting and data processing trigger, will be handy for this solution.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-html codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript keyword" style="color:#00009f">var</span><span class="token script language-javascript"> leadCreationDate </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:#e3116c">&quot;&lt;span class=eloquaemail&gt;LeadCreationTriggerDate1&lt;/span&gt;&quot;</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript keyword" style="color:#00009f">if</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript known-class-name class-name">Date</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">now</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:#393A34">-</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:#00009f">new</span><span class="token script language-javascript"> </span><span class="token script language-javascript class-name">Date</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript">leadCreationDate</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:#393A34">&lt;</span><span class="token script language-javascript"> </span><span class="token script language-javascript number" style="color:#36acaa">22680000</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">        dataLayer</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">push</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">            </span><span class="token script language-javascript comment" style="color:#999988;font-style:italic">// Your Lead conversion dataLayer model</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:#00009f">else</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">        dataLayer</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">push</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">            </span><span class="token script language-javascript comment" style="color:#999988;font-style:italic">// Your Whitepaper conversion dataLayer model</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#393A34"><span class="token script language-javascript"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span></div></div></div></div></div><p>Sample code required trigger Google Analytics conversion dataLayers conditionally
Why? Because you can check how distant in the past the Field Merged date is. And if it is within minutes, you can be pretty sure the user just became your lead. Which tells the script to push the lead conversion data layer instead of the whitepaper data layer. Simple and quick.
Eloqua is applying the date in their servers timezone (CET/CEST).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="possibilities-are-endless"></a>Possibilities are endless.<a aria-hidden="true" tabindex="-1" class="hash-link" href="#possibilities-are-endless" title="Direct link to heading">#</a></h3><p>Want to be sure only recognised users will enter your subscription centre? Add e-mail address Field Merge. If it is empty, it means Eloqua did not recognise this user. JavaScript can automatically redirect him to your subscription centre entry form.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&lt;span class=eloquaemail&gt;​EmailAddress​&lt;/span&gt;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">location</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">​</span><span class="token string" style="color:#e3116c">&quot;https://redirect.here&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div></div></div><p>Want to push some information from a data model to an external page? Field Merge that data and use JavaScript to append it to redirect link as a query string.</p><p>You can get even more power with using dynamic content (perfect for simplifying javascript logic) or web data lookups (allows you to leverage e-mail group subscription, shared list audience › even on external websites). Imagination is the only limit.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/MateuszDabrowski/mateuszdabrowski.pl/edit/master/docs/ideas/tailor-with-data.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-07-08T09:07:25.000Z" class="docLastUpdatedAt_1sqk">08/07/2020</time> by <strong>Mateusz Dąbrowski</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#outline" class="table-of-contents__link">Outline</a></li><li><a href="#leverage-the-data" class="table-of-contents__link">Leverage the data</a><ul><li><a href="#change-the-structure-of-the-landing-page" class="table-of-contents__link">Change the structure of the landing page</a></li><li><a href="#create-a-genuinely-dynamic-form" class="table-of-contents__link">Create a genuinely dynamic form</a></li><li><a href="#enrich-your-data" class="table-of-contents__link">Enrich your data</a></li></ul></li><li><a href="#script-your-solution" class="table-of-contents__link">Script your solution</a><ul><li><a href="#hiding-elements-on-the-website" class="table-of-contents__link">Hiding elements on the website</a></li><li><a href="#changing-elements-on-the-website" class="table-of-contents__link">Changing elements on the website</a></li></ul></li><li><a href="#create-conditional-logic" class="table-of-contents__link">Create conditional logic</a><ul><li><a href="#possibilities-are-endless" class="table-of-contents__link">Possibilities are endless.</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Read</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs">Docs &amp; Snippets</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/ideas">Ideas</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">About</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/toolset">Toolset</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/licence">Licence &amp; Attribution</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/privacy">Privacy</a></li></ul></div></div><div class="text--center"><div></div></div></div></footer></div>
<script src="/styles.8b734d68.js"></script>
<script src="/runtime~main.7078fd9f.js"></script>
<script src="/main.777e0ea4.js"></script>
<script src="/1.9a912c39.js"></script>
<script src="/2.6fe32394.js"></script>
<script src="/19.c4578225.js"></script>
<script src="/20.31b1fab7.js"></script>
<script src="/20ac7829.4fab0293.js"></script>
<script src="/17896441.1aa57ae8.js"></script>
<script src="/8d9c1074.99ce9ac3.js"></script>
</body>
</html>